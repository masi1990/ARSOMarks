import { Repository } from 'typeorm';
import { Standard } from '../entities/standard.entity';
import { ProductStandard } from '../entities/product-standard.entity';
import { Coc, CocStatus } from '../entities/coc.entity';
import { QrToken } from '../entities/qr-token.entity';
import { CocStatusHistory } from '../entities/coc-status-history.entity';
import { ScanLog } from '../entities/scan-log.entity';
import { SearchLog } from '../entities/search-log.entity';
import { Product } from '../../product-certification/entities/product.entity';
import { ProductCertificationApplication } from '../../product-certification/entities/product-certification-application.entity';
import { Country } from '../../reference-data/entities/country.entity';
import { CreateStandardDto } from '../dtos/create-standard.dto';
import { AssignStandardsDto } from '../dtos/assign-standards.dto';
import { GenerateCocDto } from '../dtos/generate-coc.dto';
import { CocGeneratorService } from './coc-generator.service';
import { QrSigningService } from './qr-signing.service';
import { VerifyTokenDto } from '../dtos/verify-token.dto';
import { UpdateCocStatusDto } from '../dtos/update-coc-status.dto';
export declare class TraceabilityService {
    private readonly standardRepo;
    private readonly productStandardRepo;
    private readonly cocRepo;
    private readonly qrTokenRepo;
    private readonly historyRepo;
    private readonly scanLogRepo;
    private readonly searchLogRepo;
    private readonly productRepo;
    private readonly applicationRepo;
    private readonly countryRepo;
    private readonly cocGenerator;
    private readonly qrSigning;
    constructor(standardRepo: Repository<Standard>, productStandardRepo: Repository<ProductStandard>, cocRepo: Repository<Coc>, qrTokenRepo: Repository<QrToken>, historyRepo: Repository<CocStatusHistory>, scanLogRepo: Repository<ScanLog>, searchLogRepo: Repository<SearchLog>, productRepo: Repository<Product>, applicationRepo: Repository<ProductCertificationApplication>, countryRepo: Repository<Country>, cocGenerator: CocGeneratorService, qrSigning: QrSigningService);
    createStandard(dto: CreateStandardDto): Promise<Standard>;
    assignStandards(dto: AssignStandardsDto): Promise<ProductStandard[]>;
    issueCoc(dto: GenerateCocDto, actorId?: string): Promise<Coc | {
        token: string;
        publicUrl: string;
        id: string;
        cocNumber: string;
        productId: string;
        product: Product;
        applicationId: string;
        application: ProductCertificationApplication;
        status: CocStatus;
        qrPayloadSig?: string;
        issuedAt?: Date;
        expiresAt?: Date;
        revokedAt?: Date;
        checksum?: string;
        originCountryId?: string;
        originCountry?: Country;
        createdAt: Date;
        updatedAt: Date;
        tokens?: QrToken[];
        history?: CocStatusHistory[];
    }>;
    revokeCoc(dto: UpdateCocStatusDto, actorId?: string): Promise<Coc>;
    verifyToken(dto: VerifyTokenDto, meta: {
        ip?: string;
        userAgent?: string;
    }): Promise<{
        valid: boolean;
        status: string;
        cocNumber?: undefined;
        product?: undefined;
        applicationId?: undefined;
        expiresAt?: undefined;
        standards?: undefined;
        publicUrl?: undefined;
    } | {
        valid: boolean;
        status: CocStatus;
        cocNumber: string;
        product: {
            id: string;
            name: string;
            brand: string;
            originCountry: Country;
        };
        applicationId: string;
        expiresAt: Date;
        standards: Standard[];
        publicUrl: string;
    }>;
    publicProducts(filters: {
        search?: string;
        category?: string;
        country?: string;
        standardCode?: string;
        skip?: number;
        limit?: number;
    }): Promise<{
        id: string;
        cocNumber: string;
        productName: string;
        brand: string;
        countryOfOrigin: string;
        originCountryName: string;
        standards: string[];
        issueDate: string;
        expiryDate: string;
        category: import("../../../shared/enums").ProductCategory;
        applicationId: string;
        qrUrl: string;
    }[]>;
    publicProductDetail(id: string): Promise<{
        id: string;
        cocNumber: string;
        productName: string;
        brand: string;
        countryOfOrigin: string;
        originCountryName: string;
        standards: string[];
        issueDate: string;
        expiryDate: string;
        category: import("../../../shared/enums").ProductCategory;
        applicationId: string;
        qrUrl: string;
    }>;
    logSearch(query: string | undefined, filters: Record<string, any>, geo?: {
        ip?: string;
        country?: string;
        city?: string;
        lat?: number;
        lon?: number;
    }): Promise<void>;
    private logScan;
    private defaultExpiry;
}
