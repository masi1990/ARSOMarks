<div class="space-y-8">
  <section class="card-surface px-6 py-6">
    <div class="flex flex-col gap-3">
      <p class="text-xs font-semibold uppercase tracking-[0.14em] text-slate-500">NSB Management</p>
      <h1 class="text-2xl font-semibold text-slate-900">My National Standards Body</h1>
      <p class="max-w-3xl text-sm text-slate-600">
        Manage your National Standards Body (NSB) information and details.
      </p>
    </div>
  </section>

  <!-- Loading State -->
  <section *ngIf="loading" class="card-surface px-6 py-8">
    <div class="flex items-center justify-center">
      <p class="text-sm text-slate-600">Loading NSB information...</p>
    </div>
  </section>

  <!-- Error State -->
  <section *ngIf="!loading && error" class="card-surface px-6 py-6">
    <div class="rounded-lg bg-rose-50 border border-rose-200 p-4">
      <p class="text-sm font-medium text-rose-800">{{ error }}</p>
      <button
        class="mt-3 rounded-lg bg-rose-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-rose-700"
        (click)="loadMyNsb()"
      >
        Retry
      </button>
    </div>
  </section>

  <!-- NSB Information -->
  <section *ngIf="!loading && !error && nsb" class="card-surface px-6 py-6">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-lg font-semibold text-slate-900">NSB Details</h2>
      <button
        *ngIf="isNsbAdmin() && !isEditing"
        class="rounded-lg bg-slate-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-700"
        (click)="startEdit()"
      >
        Edit Information
      </button>
    </div>

    <!-- View Mode -->
    <div *ngIf="!isEditing" class="space-y-6">
      <div class="grid gap-6 md:grid-cols-2">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Name</p>
          <p class="text-base font-medium text-slate-900">{{ nsb.name }}</p>
        </div>

        <div *ngIf="nsb.shortName">
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Short Name</p>
          <p class="text-base font-medium text-slate-900">{{ nsb.shortName }}</p>
        </div>

        <div *ngIf="nsb.country">
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Country</p>
          <p class="text-base font-medium text-slate-900">{{ nsb.country.name }}</p>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Classification</p>
          <p class="text-base font-medium text-slate-900">{{ nsb.classification }}</p>
        </div>

        <div *ngIf="nsb.registrationNumber">
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Registration Number</p>
          <p class="text-base font-medium text-slate-900">{{ nsb.registrationNumber }}</p>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Status</p>
          <span
            class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold"
            [ngClass]="{
              'bg-emerald-50 text-emerald-700': nsb.status === 'ACTIVE',
              'bg-slate-50 text-slate-700': nsb.status === 'INACTIVE',
              'bg-amber-50 text-amber-700': nsb.status === 'SUSPENDED'
            }"
          >
            {{ nsb.status }}
          </span>
        </div>
      </div>

      <div *ngIf="nsb.description">
        <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-1">Description</p>
        <p class="text-sm text-slate-700 whitespace-pre-wrap">{{ nsb.description }}</p>
      </div>

      <!-- Contacts -->
      <div *ngIf="nsb.contacts && nsb.contacts.length > 0" class="mt-6">
        <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-3">Contacts</p>
        <div class="space-y-3">
          <div
            *ngFor="let contact of nsb.contacts"
            class="rounded-lg border border-slate-200 p-4"
          >
            <p class="font-medium text-slate-900">{{ contact.name }}</p>
            <p class="text-sm text-slate-600">{{ contact.email }}</p>
            <p *ngIf="contact.phone" class="text-sm text-slate-600">{{ contact.phone }}</p>
            <p *ngIf="contact.title" class="text-xs text-slate-500 mt-1">{{ contact.title }}</p>
          </div>
        </div>
      </div>

      <!-- Locations -->
      <div *ngIf="nsb.locations && nsb.locations.length > 0" class="mt-6">
        <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-3">Locations</p>
        <div class="space-y-3">
          <div
            *ngFor="let location of nsb.locations"
            class="rounded-lg border border-slate-200 p-4"
          >
            <p class="font-medium text-slate-900">{{ location.name }}</p>
            <p class="text-sm text-slate-600">{{ location.address }}</p>
            <p *ngIf="location.city" class="text-sm text-slate-600">{{ location.city }}</p>
            <p *ngIf="location.postalCode" class="text-sm text-slate-600">{{ location.postalCode }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Mode -->
    <div *ngIf="isEditing" class="space-y-6">
      <div class="grid gap-6 md:grid-cols-2">
        <div>
          <label class="block text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-2">
            Name
          </label>
          <input
            type="text"
            [(ngModel)]="editForm.name"
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-slate-900 focus:outline-none"
          />
        </div>

        <div>
          <label class="block text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-2">
            Short Name
          </label>
          <input
            type="text"
            [(ngModel)]="editForm.shortName"
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-slate-900 focus:outline-none"
          />
        </div>

        <div>
          <label class="block text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-2">
            Registration Number
          </label>
          <input
            type="text"
            [(ngModel)]="editForm.registrationNumber"
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-slate-900 focus:outline-none"
          />
        </div>
      </div>

      <div>
        <label class="block text-xs font-semibold uppercase tracking-[0.12em] text-slate-500 mb-2">
          Description
        </label>
        <textarea
          [(ngModel)]="editForm.description"
          rows="4"
          class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-slate-900 focus:outline-none"
        ></textarea>
      </div>

      <!-- Success/Error Messages -->
      <div *ngIf="saveSuccess" class="rounded-lg bg-emerald-50 border border-emerald-200 p-4">
        <p class="text-sm font-medium text-emerald-800">{{ saveSuccess }}</p>
      </div>

      <div *ngIf="saveError" class="rounded-lg bg-rose-50 border border-rose-200 p-4">
        <p class="text-sm font-medium text-rose-800">{{ saveError }}</p>
      </div>

      <!-- Action Buttons -->
      <div class="flex gap-3">
        <button
          class="rounded-lg bg-slate-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-700 disabled:opacity-60"
          (click)="saveChanges()"
          [disabled]="saving"
        >
          {{ saving ? 'Saving...' : 'Save Changes' }}
        </button>
        <button
          class="rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:bg-slate-50"
          (click)="cancelEdit()"
          [disabled]="saving"
        >
          Cancel
        </button>
      </div>
    </div>
  </section>

  <!-- No NSB Found -->
  <section *ngIf="!loading && !error && !nsb" class="card-surface px-6 py-8">
    <div class="text-center">
      <p class="text-sm text-slate-600">No NSB information found. Please contact the administrator.</p>
    </div>
  </section>
</div>


