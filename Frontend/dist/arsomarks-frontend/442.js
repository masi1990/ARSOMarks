"use strict";(self.webpackChunkarsomarks_frontend=self.webpackChunkarsomarks_frontend||[]).push([[442],{6442:(V,m,a)=>{a.r(m),a.d(m,{NsbManagementModule:()=>J});var c=a(177),_=a(1377),d=a(9417),p=a(980),l=a(1749),t=a(6276),g=a(4183),b=a(3769);function f(n,i){1&n&&(t.j41(0,"section",8)(1,"div",9)(2,"p",10),t.EFF(3,"Loading NSB information..."),t.k0s()()())}function u(n,i){if(1&n){const e=t.RV6();t.j41(0,"section",1)(1,"div",11)(2,"p",12),t.EFF(3),t.k0s(),t.j41(4,"button",13),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.loadMyNsb())}),t.EFF(5," Retry "),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(3),t.JRh(e.error)}}function v(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.startEdit())}),t.EFF(1," Edit Information "),t.k0s()}}function h(n,i){if(1&n&&(t.j41(0,"div")(1,"p",21),t.EFF(2,"Short Name"),t.k0s(),t.j41(3,"p",22),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.nsb.shortName)}}function x(n,i){if(1&n&&(t.j41(0,"div")(1,"p",21),t.EFF(2,"Country"),t.k0s(),t.j41(3,"p",22),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.nsb.country.name)}}function F(n,i){if(1&n&&(t.j41(0,"div")(1,"p",21),t.EFF(2,"Registration Number"),t.k0s(),t.j41(3,"p",22),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.nsb.registrationNumber)}}function N(n,i){if(1&n&&(t.j41(0,"div")(1,"p",21),t.EFF(2,"Description"),t.k0s(),t.j41(3,"p",26),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.nsb.description)}}function E(n,i){if(1&n&&(t.j41(0,"p",10),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.phone)}}function R(n,i){if(1&n&&(t.j41(0,"p",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.title)}}function j(n,i){if(1&n&&(t.j41(0,"div",31)(1,"p",32),t.EFF(2),t.k0s(),t.j41(3,"p",10),t.EFF(4),t.k0s(),t.DNE(5,E,2,1,"p",33),t.DNE(6,R,2,1,"p",34),t.k0s()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.email),t.R7$(1),t.Y8G("ngIf",e.phone),t.R7$(1),t.Y8G("ngIf",e.title)}}function k(n,i){if(1&n&&(t.j41(0,"div",27)(1,"p",28),t.EFF(2,"Contacts"),t.k0s(),t.j41(3,"div",29),t.DNE(4,j,7,4,"div",30),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.Y8G("ngForOf",e.nsb.contacts)}}function M(n,i){if(1&n&&(t.j41(0,"p",10),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.city)}}function C(n,i){if(1&n&&(t.j41(0,"p",10),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.postalCode)}}function $(n,i){if(1&n&&(t.j41(0,"div",31)(1,"p",32),t.EFF(2),t.k0s(),t.j41(3,"p",10),t.EFF(4),t.k0s(),t.DNE(5,M,2,1,"p",33),t.DNE(6,C,2,1,"p",33),t.k0s()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.address),t.R7$(1),t.Y8G("ngIf",e.city),t.R7$(1),t.Y8G("ngIf",e.postalCode)}}function G(n,i){if(1&n&&(t.j41(0,"div",27)(1,"p",28),t.EFF(2,"Locations"),t.k0s(),t.j41(3,"div",29),t.DNE(4,$,7,4,"div",30),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.Y8G("ngForOf",e.nsb.locations)}}const I=function(n,i,e){return{"bg-emerald-50 text-emerald-700":n,"bg-slate-50 text-slate-700":i,"bg-amber-50 text-amber-700":e}};function y(n,i){if(1&n&&(t.j41(0,"div",19)(1,"div",20)(2,"div")(3,"p",21),t.EFF(4,"Name"),t.k0s(),t.j41(5,"p",22),t.EFF(6),t.k0s()(),t.DNE(7,h,5,1,"div",23),t.DNE(8,x,5,1,"div",23),t.j41(9,"div")(10,"p",21),t.EFF(11,"Classification"),t.k0s(),t.j41(12,"p",22),t.EFF(13),t.k0s()(),t.DNE(14,F,5,1,"div",23),t.j41(15,"div")(16,"p",21),t.EFF(17,"Status"),t.k0s(),t.j41(18,"span",24),t.EFF(19),t.k0s()()(),t.DNE(20,N,5,1,"div",23),t.DNE(21,k,5,1,"div",25),t.DNE(22,G,5,1,"div",25),t.k0s()),2&n){const e=t.XpG(2);t.R7$(6),t.JRh(e.nsb.name),t.R7$(1),t.Y8G("ngIf",e.nsb.shortName),t.R7$(1),t.Y8G("ngIf",e.nsb.country),t.R7$(5),t.JRh(e.nsb.classification),t.R7$(1),t.Y8G("ngIf",e.nsb.registrationNumber),t.R7$(4),t.Y8G("ngClass",t.sMw(10,I,"ACTIVE"===e.nsb.status,"INACTIVE"===e.nsb.status,"SUSPENDED"===e.nsb.status)),t.R7$(1),t.SpI(" ",e.nsb.status," "),t.R7$(1),t.Y8G("ngIf",e.nsb.description),t.R7$(1),t.Y8G("ngIf",e.nsb.contacts&&e.nsb.contacts.length>0),t.R7$(1),t.Y8G("ngIf",e.nsb.locations&&e.nsb.locations.length>0)}}function S(n,i){if(1&n&&(t.j41(0,"div",44)(1,"p",45),t.EFF(2),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.JRh(e.saveSuccess)}}function T(n,i){if(1&n&&(t.j41(0,"div",11)(1,"p",12),t.EFF(2),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.JRh(e.saveError)}}function Y(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"div")(3,"label",36),t.EFF(4," Name "),t.k0s(),t.j41(5,"input",37),t.bIt("ngModelChange",function(s){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editForm.name=s)}),t.k0s()(),t.j41(6,"div")(7,"label",36),t.EFF(8," Short Name "),t.k0s(),t.j41(9,"input",37),t.bIt("ngModelChange",function(s){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editForm.shortName=s)}),t.k0s()(),t.j41(10,"div")(11,"label",36),t.EFF(12," Registration Number "),t.k0s(),t.j41(13,"input",37),t.bIt("ngModelChange",function(s){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editForm.registrationNumber=s)}),t.k0s()()(),t.j41(14,"div")(15,"label",36),t.EFF(16," Description "),t.k0s(),t.j41(17,"textarea",38),t.bIt("ngModelChange",function(s){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editForm.description=s)}),t.k0s()(),t.DNE(18,S,3,1,"div",39),t.DNE(19,T,3,1,"div",40),t.j41(20,"div",41)(21,"button",42),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.saveChanges())}),t.EFF(22),t.k0s(),t.j41(23,"button",43),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.cancelEdit())}),t.EFF(24," Cancel "),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(5),t.Y8G("ngModel",e.editForm.name),t.R7$(4),t.Y8G("ngModel",e.editForm.shortName),t.R7$(4),t.Y8G("ngModel",e.editForm.registrationNumber),t.R7$(4),t.Y8G("ngModel",e.editForm.description),t.R7$(1),t.Y8G("ngIf",e.saveSuccess),t.R7$(1),t.Y8G("ngIf",e.saveError),t.R7$(2),t.Y8G("disabled",e.saving),t.R7$(1),t.SpI(" ",e.saving?"Saving...":"Save Changes"," "),t.R7$(1),t.Y8G("disabled",e.saving)}}function D(n,i){if(1&n&&(t.j41(0,"section",1)(1,"div",14)(2,"h2",15),t.EFF(3,"NSB Details"),t.k0s(),t.DNE(4,v,2,0,"button",16),t.k0s(),t.DNE(5,y,23,14,"div",17),t.DNE(6,Y,25,9,"div",17),t.k0s()),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.isNsbAdmin()&&!e.isEditing),t.R7$(1),t.Y8G("ngIf",!e.isEditing),t.R7$(1),t.Y8G("ngIf",e.isEditing)}}function X(n,i){1&n&&(t.j41(0,"section",8)(1,"div",46)(2,"p",10),t.EFF(3,"No NSB information found. Please contact the administrator."),t.k0s()()())}const B=[{path:"",component:(()=>{class n{constructor(e,o){this.nsbService=e,this.authService=o,this.nsb=null,this.loading=!1,this.error="",this.saving=!1,this.saveError="",this.saveSuccess="",this.isEditing=!1,this.editForm={}}ngOnInit(){this.loadMyNsb()}loadMyNsb(){this.loading=!0,this.error="",this.nsbService.getMyNsb().pipe((0,p.j)(()=>{this.loading=!1})).subscribe({next:e=>{this.nsb=e,this.editForm={...e}},error:e=>{this.error=e?.error?.message||"Failed to load NSB information.",this.nsb=null}})}startEdit(){this.isEditing=!0,this.editForm=this.nsb?{...this.nsb}:{},this.saveError="",this.saveSuccess=""}cancelEdit(){this.isEditing=!1,this.editForm=this.nsb?{...this.nsb}:{},this.saveError="",this.saveSuccess=""}saveChanges(){this.nsb&&(this.saving=!0,this.saveError="",this.saveSuccess="",this.nsbService.updateNsb(this.nsb.id,this.editForm).pipe((0,p.j)(()=>{this.saving=!1})).subscribe({next:e=>{this.nsb=e,this.isEditing=!1,this.saveSuccess="NSB information updated successfully."},error:e=>{this.saveError=e?.error?.message||"Failed to update NSB information."}}))}isNsbAdmin(){const e=this.authService.currentUserValue,o=e?.roles||(e?.role?[e.role]:[]);return o.includes(l.g.NSB_ADMIN)||o.includes(l.g.SUPER_ADMIN)||o.includes(l.g.ARSO_SECRETARIAT)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(g.B),t.rXU(b.u))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-nsb-management"]],decls:13,vars:4,consts:[[1,"space-y-8"],[1,"card-surface","px-6","py-6"],[1,"flex","flex-col","gap-3"],[1,"text-xs","font-semibold","uppercase","tracking-[0.14em]","text-slate-500"],[1,"text-2xl","font-semibold","text-slate-900"],[1,"max-w-3xl","text-sm","text-slate-600"],["class","card-surface px-6 py-8",4,"ngIf"],["class","card-surface px-6 py-6",4,"ngIf"],[1,"card-surface","px-6","py-8"],[1,"flex","items-center","justify-center"],[1,"text-sm","text-slate-600"],[1,"rounded-lg","bg-rose-50","border","border-rose-200","p-4"],[1,"text-sm","font-medium","text-rose-800"],[1,"mt-3","rounded-lg","bg-rose-600","px-4","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-rose-700",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-slate-900"],["class","rounded-lg bg-slate-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-700",3,"click",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"rounded-lg","bg-slate-600","px-4","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-slate-700",3,"click"],[1,"space-y-6"],[1,"grid","gap-6","md:grid-cols-2"],[1,"text-xs","font-semibold","uppercase","tracking-[0.12em]","text-slate-500","mb-1"],[1,"text-base","font-medium","text-slate-900"],[4,"ngIf"],[1,"inline-flex","items-center","rounded-full","px-3","py-1","text-xs","font-semibold",3,"ngClass"],["class","mt-6",4,"ngIf"],[1,"text-sm","text-slate-700","whitespace-pre-wrap"],[1,"mt-6"],[1,"text-xs","font-semibold","uppercase","tracking-[0.12em]","text-slate-500","mb-3"],[1,"space-y-3"],["class","rounded-lg border border-slate-200 p-4",4,"ngFor","ngForOf"],[1,"rounded-lg","border","border-slate-200","p-4"],[1,"font-medium","text-slate-900"],["class","text-sm text-slate-600",4,"ngIf"],["class","text-xs text-slate-500 mt-1",4,"ngIf"],[1,"text-xs","text-slate-500","mt-1"],[1,"block","text-xs","font-semibold","uppercase","tracking-[0.12em]","text-slate-500","mb-2"],["type","text",1,"w-full","rounded-lg","border","border-slate-300","px-3","py-2","text-sm","focus:border-slate-900","focus:outline-none",3,"ngModel","ngModelChange"],["rows","4",1,"w-full","rounded-lg","border","border-slate-300","px-3","py-2","text-sm","focus:border-slate-900","focus:outline-none",3,"ngModel","ngModelChange"],["class","rounded-lg bg-emerald-50 border border-emerald-200 p-4",4,"ngIf"],["class","rounded-lg bg-rose-50 border border-rose-200 p-4",4,"ngIf"],[1,"flex","gap-3"],[1,"rounded-lg","bg-slate-600","px-4","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-slate-700","disabled:opacity-60",3,"disabled","click"],[1,"rounded-lg","border","border-slate-300","px-4","py-2","text-sm","font-semibold","text-slate-700","shadow-sm","hover:bg-slate-50",3,"disabled","click"],[1,"rounded-lg","bg-emerald-50","border","border-emerald-200","p-4"],[1,"text-sm","font-medium","text-emerald-800"],[1,"text-center"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"section",1)(2,"div",2)(3,"p",3),t.EFF(4,"NSB Management"),t.k0s(),t.j41(5,"h1",4),t.EFF(6,"My National Standards Body"),t.k0s(),t.j41(7,"p",5),t.EFF(8," Manage your National Standards Body (NSB) information and details. "),t.k0s()()(),t.DNE(9,f,4,0,"section",6),t.DNE(10,u,6,1,"section",7),t.DNE(11,D,7,3,"section",7),t.DNE(12,X,4,0,"section",6),t.k0s()),2&o&&(t.R7$(9),t.Y8G("ngIf",s.loading),t.R7$(1),t.Y8G("ngIf",!s.loading&&s.error),t.R7$(1),t.Y8G("ngIf",!s.loading&&!s.error&&s.nsb),t.R7$(1),t.Y8G("ngIf",!s.loading&&!s.error&&!s.nsb))},dependencies:[c.YU,c.Sq,c.bT,d.me,d.BC,d.vS]})}}return n})()}];let J=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[c.MD,d.YN,_.iI.forChild(B)]})}}return n})()}}]);