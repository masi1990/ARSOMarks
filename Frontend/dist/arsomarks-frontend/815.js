"use strict";(self.webpackChunkarsomarks_frontend=self.webpackChunkarsomarks_frontend||[]).push([[815],{5815:(N,d,a)=>{a.r(d),a.d(d,{ApplicationRegistrationListModule:()=>w});var p=a(177),g=a(1377),s=function(i){return i.DRAFT="DRAFT",i.SUBMITTED="SUBMITTED",i.UNDER_REVIEW="UNDER_REVIEW",i.APPROVED="APPROVED",i.REJECTED="REJECTED",i.ACTIVE="ACTIVE",i.SUSPENDED="SUSPENDED",i.WITHDRAWN="WITHDRAWN",i}(s||{}),t=a(6276),u=a(7333);function m(i,r){if(1&i&&(t.j41(0,"div",11)(1,"div",12),t.qSk(),t.j41(2,"svg",13),t.nrm(3,"path",14),t.k0s(),t.joV(),t.j41(4,"p",15),t.EFF(5),t.k0s()()()),2&i){const e=t.XpG();t.R7$(5),t.JRh(e.error)}}function b(i,r){1&i&&(t.j41(0,"div",16),t.nrm(1,"div",17),t.j41(2,"p",18),t.EFF(3,"Loading applications..."),t.k0s()())}function f(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",19),t.qSk(),t.j41(1,"svg",20),t.nrm(2,"path",21),t.k0s(),t.joV(),t.j41(3,"h3",22),t.EFF(4,"No Applications Yet"),t.k0s(),t.j41(5,"p",23),t.EFF(6,"Get started by creating your first application registration"),t.k0s(),t.j41(7,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createNewApplication())}),t.EFF(8," + Create First Application "),t.k0s()()}}function _(i,r){if(1&i&&(t.j41(0,"div")(1,"span",33),t.EFF(2,"Submitted:"),t.k0s(),t.j41(3,"span",34),t.EFF(4),t.k0s()()),2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(4),t.JRh(n.formatDate(e.submittedAt))}}function v(i,r){if(1&i&&(t.j41(0,"div")(1,"span",33),t.EFF(2,"Registration Number:"),t.k0s(),t.j41(3,"span",34),t.EFF(4),t.k0s()()),2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(4),t.JRh(n.getRegistrationNumber(e))}}function h(i,r){if(1&i&&(t.j41(0,"div",41)(1,"span",33),t.EFF(2,"Business Activity:"),t.k0s(),t.j41(3,"p",42),t.EFF(4),t.k0s()()),2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(4),t.SpI(" ",n.getBusinessActivityPreview(e)," ")}}function x(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,l=t.XpG(2);return t.Njj(l.editApplication(o))}),t.EFF(1," Edit "),t.k0s()}}function y(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,l=t.XpG(2);return t.Njj(l.deleteApplication(o))}),t.EFF(1," Delete "),t.k0s()}}function R(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,l=t.XpG(2);return t.Njj(l.editApplication(o))}),t.EFF(1," View "),t.k0s()}}function E(i,r){if(1&i&&(t.j41(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"h3",30),t.EFF(5),t.k0s(),t.j41(6,"span",31),t.EFF(7),t.k0s()(),t.j41(8,"div",32)(9,"div")(10,"span",33),t.EFF(11,"Application Number:"),t.k0s(),t.j41(12,"span",34),t.EFF(13),t.k0s()(),t.j41(14,"div")(15,"span",33),t.EFF(16,"Created:"),t.k0s(),t.j41(17,"span",34),t.EFF(18),t.k0s()(),t.DNE(19,_,5,1,"div",35),t.DNE(20,v,5,1,"div",35),t.k0s(),t.DNE(21,h,5,1,"div",36),t.k0s(),t.j41(22,"div",37),t.DNE(23,x,2,0,"button",38),t.DNE(24,y,2,0,"button",39),t.DNE(25,R,2,0,"button",40),t.k0s()()()),2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(5),t.JRh(n.getCompanyName(e)),t.R7$(1),t.Y8G("ngClass",n.getStatusBadgeClass(e.status)),t.R7$(1),t.SpI(" ",n.getStatusLabel(e.status)," "),t.R7$(6),t.JRh(e.applicationNumber||"Not assigned"),t.R7$(5),t.JRh(n.formatDate(e.createdAt)),t.R7$(1),t.Y8G("ngIf",e.submittedAt),t.R7$(1),t.Y8G("ngIf",n.getRegistrationNumber(e)),t.R7$(1),t.Y8G("ngIf",n.getBusinessActivity(e)),t.R7$(2),t.Y8G("ngIf",n.canEdit(e)),t.R7$(1),t.Y8G("ngIf",n.canEdit(e)),t.R7$(1),t.Y8G("ngIf",!n.canEdit(e))}}function A(i,r){if(1&i&&(t.j41(0,"div",24),t.DNE(1,E,26,11,"div",25),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.applications)}}let F=(()=>{class i{constructor(e,n){this.applicationRegistrationService=e,this.router=n,this.applications=[],this.loading=!1,this.error=""}ngOnInit(){this.loadApplications()}loadApplications(){this.loading=!0,this.error="",this.applicationRegistrationService.getMyApplications().subscribe({next:e=>{this.applications=e,this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load applications",this.loading=!1}})}getStatusBadgeClass(e){switch(e){case s.DRAFT:return"bg-yellow-100 text-yellow-800 border-yellow-300";case s.SUBMITTED:return"bg-blue-100 text-blue-800 border-blue-300";case s.APPROVED:return"bg-green-100 text-green-800 border-green-300";case s.REJECTED:return"bg-red-100 text-red-800 border-red-300";case s.UNDER_REVIEW:return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}}getStatusLabel(e){return e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}getCompanyName(e){const n=e;return n.companyInfo?.companyLegalName?n.companyInfo.companyLegalName:e.applicantName?e.applicantName:"Unnamed Application"}getCompanyInfo(e){return e.companyInfo||null}getRegistrationNumber(e){return this.getCompanyInfo(e)?.registrationNumberBusiness||null}getBusinessActivity(e){return this.getCompanyInfo(e)?.businessActivity||null}getBusinessActivityPreview(e){const n=this.getBusinessActivity(e);return n?n.length>150?n.substring(0,150)+"...":n:""}canEdit(e){return e.status===s.DRAFT}editApplication(e){this.router.navigate(["/application-registration"],{queryParams:{id:e.id}})}createNewApplication(){this.router.navigate(["/application-registration"])}deleteApplication(e){confirm("Are you sure you want to delete this application? This action cannot be undone.")&&this.applicationRegistrationService.deleteApplication(e.id).subscribe({next:()=>{this.loadApplications()},error:n=>{this.error=n.error?.message||"Failed to delete application"}})}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(u.z),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-application-registration-list"]],decls:15,vars:4,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4"],[1,"max-w-7xl","mx-auto"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6","border-2","border-gray-200"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","border-2","border-blue-700","font-medium","transition-colors","shadow-md",3,"click"],["class","mb-6 p-4 bg-red-50 border-2 border-red-400 text-red-800 rounded-lg",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-8 border-2 border-gray-200 text-center",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-12 border-2 border-gray-200 text-center",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"mb-6","p-4","bg-red-50","border-2","border-red-400","text-red-800","rounded-lg"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-2"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"font-semibold"],[1,"bg-white","rounded-lg","shadow-md","p-8","border-2","border-gray-200","text-center"],[1,"inline-block","animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"mt-4","text-gray-600"],[1,"bg-white","rounded-lg","shadow-md","p-12","border-2","border-gray-200","text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-24","w-24","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"space-y-4"],["class","bg-white rounded-lg shadow-md p-6 border-2 border-gray-200 hover:shadow-lg transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","p-6","border-2","border-gray-200","hover:shadow-lg","transition-shadow"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"flex","items-center","gap-4","mb-3"],[1,"text-xl","font-bold","text-gray-900"],[1,"px-3","py-1","rounded-full","text-sm","font-semibold","border-2",3,"ngClass"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm","text-gray-600","mb-4"],[1,"font-medium"],[1,"ml-2"],[4,"ngIf"],["class","text-sm text-gray-600",4,"ngIf"],[1,"flex","flex-col","gap-2","ml-4"],["class","px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 border-2 border-blue-700 font-medium transition-colors text-sm",3,"click",4,"ngIf"],["class","px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 border-2 border-red-700 font-medium transition-colors text-sm",3,"click",4,"ngIf"],["class","px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 border-2 border-gray-500 font-medium transition-colors text-sm cursor-not-allowed","disabled","","title","Cannot edit submitted applications",3,"click",4,"ngIf"],[1,"text-sm","text-gray-600"],[1,"mt-1","text-gray-700"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","border-2","border-blue-700","font-medium","transition-colors","text-sm",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","border-2","border-red-700","font-medium","transition-colors","text-sm",3,"click"],["disabled","","title","Cannot edit submitted applications",1,"px-4","py-2","bg-gray-400","text-white","rounded-lg","hover:bg-gray-500","border-2","border-gray-500","font-medium","transition-colors","text-sm","cursor-not-allowed",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),t.EFF(6,"My Application Registrations"),t.k0s(),t.j41(7,"p",5),t.EFF(8,"Manage your company application registrations"),t.k0s()(),t.j41(9,"button",6),t.bIt("click",function(){return o.createNewApplication()}),t.EFF(10," + New Application "),t.k0s()()(),t.DNE(11,m,6,1,"div",7),t.DNE(12,b,4,0,"div",8),t.DNE(13,f,9,0,"div",9),t.DNE(14,A,2,1,"div",10),t.k0s()()),2&n&&(t.R7$(11),t.Y8G("ngIf",o.error),t.R7$(1),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",!o.loading&&0===o.applications.length),t.R7$(1),t.Y8G("ngIf",!o.loading&&o.applications.length>0))},dependencies:[p.YU,p.Sq,p.bT]})}}return i})();var k=a(9303),c=a(1749);const I=[{path:"",component:F,canActivate:[k.K],data:{roles:[c.g.OPERATOR,c.g.NSB_ADMIN,c.g.SUPER_ADMIN]}}];let w=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[p.MD,g.iI.forChild(I)]})}}return i})()}}]);