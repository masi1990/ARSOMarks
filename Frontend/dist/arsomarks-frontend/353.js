"use strict";(self.webpackChunkarsomarks_frontend=self.webpackChunkarsomarks_frontend||[]).push([[353],{9734:(de,v,a)=>{a.r(v),a.d(v,{NsbReviewModule:()=>ce});var d=a(177),m=a(1377),l=a(9417),u=a(980),c=a(9617),_=a(1749),e=a(540),b=a(3571),f=a(3769);function R(s,n){if(1&s&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.SpI(" ",t.error," ")}}function h(s,n){1&s&&(e.j41(0,"div",25)(1,"p",26),e.EFF(2,"Loading requests..."),e.k0s()())}function g(s,n){1&s&&(e.j41(0,"div",25)(1,"p",26),e.EFF(2,"No registration requests found."),e.k0s()())}function F(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.HbH("chip "+i.getStatusColor(t.status)),e.R7$(1),e.SpI(" ",i.getStatusLabel(t.status)," ")}}function x(s,n){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=n.$implicit,i=e.XpG(2).$implicit;e.Y8G("value",t.value)("disabled",t.value===i.status),e.R7$(1),e.SpI(" ",t.label," ")}}function k(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",43)(1,"span",44),e.EFF(2,"Status:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"select",45),e.bIt("change",function(o){e.eBV(t);const r=e.XpG().$implicit,p=e.XpG(2);return e.Njj(p.updateStatus(r,o.target.value))}),e.DNE(6,x,2,3,"option",46),e.k0s()()}if(2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.HbH("chip "+i.getStatusColor(t.status)),e.R7$(1),e.SpI(" ",i.getStatusLabel(t.status)," "),e.R7$(1),e.Y8G("value",t.status),e.R7$(1),e.Y8G("ngForOf",i.getStatusOptions())}}function j(s,n){if(1&s&&(e.j41(0,"div")(1,"span",37),e.EFF(2,"Submitted:"),e.k0s(),e.EFF(3),e.nI1(4,"date"),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",e.i5U(4,1,t.createdAt,"medium")," ")}}function E(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.openReviewModal(o,"approve"))}),e.EFF(1," Approve "),e.k0s()}}function w(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.openReviewModal(o,"reject"))}),e.EFF(1," Reject "),e.k0s()}}function N(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"h3",33),e.EFF(5),e.k0s(),e.DNE(6,F,2,3,"span",34),e.DNE(7,k,7,5,"div",35),e.k0s(),e.j41(8,"div",36)(9,"div")(10,"span",37),e.EFF(11,"Country:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"div")(14,"span",37),e.EFF(15,"Acronym:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"div")(18,"span",37),e.EFF(19,"Contact:"),e.k0s(),e.EFF(20),e.k0s(),e.j41(21,"div")(22,"span",37),e.EFF(23,"Email:"),e.k0s(),e.EFF(24),e.k0s(),e.DNE(25,j,5,4,"div",38),e.k0s()(),e.j41(26,"div",39)(27,"button",40),e.bIt("click",function(){const r=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.viewRequest(r))}),e.EFF(28,"View Details"),e.k0s(),e.DNE(29,E,2,0,"button",41),e.DNE(30,w,2,0,"button",42),e.k0s()()()}if(2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(5),e.JRh(t.nsbOfficialName),e.R7$(1),e.Y8G("ngIf",!i.canEditStatus()),e.R7$(1),e.Y8G("ngIf",i.canEditStatus()),e.R7$(5),e.Lme(" ",t.countryName," (",t.isoCode,") "),e.R7$(4),e.SpI(" ",t.nsbAcronym||"Not provided"," "),e.R7$(4),e.SpI(" ",t.contactPersonName," "),e.R7$(4),e.SpI(" ",t.contactEmail," "),e.R7$(1),e.Y8G("ngIf",t.createdAt),e.R7$(4),e.Y8G("ngIf",i.canApprove(t)),e.R7$(1),e.Y8G("ngIf",i.canReject(t))}}function C(s,n){if(1&s&&(e.j41(0,"div",27),e.DNE(1,N,31,11,"div",28),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.requests)}}function S(s,n){if(1&s&&(e.j41(0,"p",70)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(1),e.HbH("chip "+t.getStatusColor(t.selectedRequest.status)),e.R7$(1),e.SpI(" ",t.getStatusLabel(t.selectedRequest.status)," ")}}function q(s,n){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=n.$implicit,i=e.XpG(4);e.Y8G("value",t.value)("disabled",t.value===i.selectedRequest.status),e.R7$(1),e.SpI(" Change to: ",t.label," ")}}function $(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",71)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"select",45),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(3);return e.Njj(r.updateStatus(r.selectedRequest,o.target.value))}),e.DNE(4,q,2,3,"option",46),e.k0s()()}if(2&s){const t=e.XpG(3);e.R7$(1),e.HbH("chip "+t.getStatusColor(t.selectedRequest.status)),e.R7$(1),e.SpI(" ",t.getStatusLabel(t.selectedRequest.status)," "),e.R7$(1),e.Y8G("value",t.selectedRequest.status),e.R7$(1),e.Y8G("ngForOf",t.getStatusOptions())}}function I(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3);e.R7$(1),e.SpI(" ",t.selectedRequest.requestedRoles.join(", ")," ")}}function G(s,n){1&s&&(e.j41(0,"span"),e.EFF(1," Not specified "),e.k0s())}function T(s,n){if(1&s&&(e.j41(0,"p",44),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(1),e.SpI("Size: ",(t.fileSize/1024/1024).toFixed(2)," MB")}}function D(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(4);return e.Njj(r.viewDocument(o))}),e.EFF(1," View "),e.k0s()}}function y(s,n){if(1&s&&(e.j41(0,"div",74)(1,"div")(2,"p",75),e.EFF(3),e.k0s(),e.j41(4,"p",76),e.EFF(5),e.k0s(),e.DNE(6,T,2,1,"p",77),e.k0s(),e.DNE(7,D,2,0,"button",78),e.k0s()),2&s){const t=n.$implicit;e.R7$(3),e.JRh(t.fileName),e.R7$(2),e.JRh(t.documentType),e.R7$(1),e.Y8G("ngIf",t.fileSize),e.R7$(1),e.Y8G("ngIf",t.id)}}function A(s,n){if(1&s&&(e.j41(0,"div",72),e.DNE(1,y,8,4,"div",73),e.k0s()),2&s){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.selectedRequest.documents)}}function Y(s,n){1&s&&(e.j41(0,"p",80),e.EFF(1," No documents uploaded "),e.k0s())}function X(s,n){if(1&s&&(e.j41(0,"div")(1,"span",61),e.EFF(2,"Reviewed At:"),e.k0s(),e.j41(3,"p",62),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(4),e.JRh(e.i5U(5,1,t.selectedRequest.reviewedAt,"medium"))}}function V(s,n){if(1&s&&(e.j41(0,"div")(1,"span",61),e.EFF(2,"Remarks:"),e.k0s(),e.j41(3,"p",62),e.EFF(4),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(4),e.JRh(t.selectedRequest.remarks)}}function M(s,n){if(1&s&&(e.j41(0,"div",58)(1,"h3",59),e.EFF(2,"Review Information"),e.k0s(),e.j41(3,"div",60),e.DNE(4,X,6,4,"div",38),e.DNE(5,V,5,1,"div",38),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(4),e.Y8G("ngIf",t.selectedRequest.reviewedAt),e.R7$(1),e.Y8G("ngIf",t.selectedRequest.remarks)}}function B(s,n){if(1&s&&(e.j41(0,"div")(1,"span",61),e.EFF(2,"Last Updated:"),e.k0s(),e.j41(3,"p",62),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(4),e.JRh(e.i5U(5,1,t.selectedRequest.updatedAt,"medium"))}}function U(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return o.closeDetailsModal(),e.Njj(o.openReviewModal(o.selectedRequest,"approve"))}),e.EFF(1," Approve Request "),e.k0s()}}function O(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return o.closeDetailsModal(),e.Njj(o.openReviewModal(o.selectedRequest,"reject"))}),e.EFF(1," Reject Request "),e.k0s()}}function J(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",57)(1,"div",58)(2,"h3",59),e.EFF(3,"Basic Information"),e.k0s(),e.j41(4,"div",60)(5,"div")(6,"span",61),e.EFF(7,"NSB Official Name:"),e.k0s(),e.j41(8,"p",62),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"span",61),e.EFF(12,"NSB Acronym:"),e.k0s(),e.j41(13,"p",62),e.EFF(14),e.k0s()(),e.j41(15,"div")(16,"span",61),e.EFF(17,"Country:"),e.k0s(),e.j41(18,"p",62),e.EFF(19),e.k0s()(),e.j41(20,"div")(21,"span",61),e.EFF(22,"Status:"),e.k0s(),e.DNE(23,S,3,3,"p",63),e.DNE(24,$,5,5,"div",64),e.k0s()()(),e.j41(25,"div",58)(26,"h3",59),e.EFF(27,"Contact Information"),e.k0s(),e.j41(28,"div",60)(29,"div")(30,"span",61),e.EFF(31,"Contact Person:"),e.k0s(),e.j41(32,"p",62),e.EFF(33),e.k0s()(),e.j41(34,"div")(35,"span",61),e.EFF(36,"Title/Position:"),e.k0s(),e.j41(37,"p",62),e.EFF(38),e.k0s()(),e.j41(39,"div")(40,"span",61),e.EFF(41,"Email:"),e.k0s(),e.j41(42,"p",62),e.EFF(43),e.k0s()(),e.j41(44,"div")(45,"span",61),e.EFF(46,"Phone:"),e.k0s(),e.j41(47,"p",62),e.EFF(48),e.k0s()(),e.j41(49,"div")(50,"span",61),e.EFF(51,"Mobile:"),e.k0s(),e.j41(52,"p",62),e.EFF(53),e.k0s()()()(),e.j41(54,"div",58)(55,"h3",59),e.EFF(56,"Role Designation"),e.k0s(),e.j41(57,"div",60)(58,"div")(59,"span",61),e.EFF(60,"Additional User Slots Requested:"),e.k0s(),e.j41(61,"p",62),e.EFF(62),e.k0s()(),e.j41(63,"div")(64,"span",61),e.EFF(65,"Requested Roles:"),e.k0s(),e.j41(66,"p",62),e.DNE(67,I,2,1,"span",38),e.DNE(68,G,2,0,"span",38),e.k0s()()()(),e.j41(69,"div",58)(70,"h3",59),e.EFF(71,"Uploaded Documents"),e.k0s(),e.DNE(72,A,2,1,"div",65),e.DNE(73,Y,2,0,"p",66),e.k0s(),e.DNE(74,M,6,2,"div",67),e.j41(75,"div",58)(76,"h3",59),e.EFF(77,"Timestamps"),e.k0s(),e.j41(78,"div",60)(79,"div")(80,"span",61),e.EFF(81,"Created At:"),e.k0s(),e.j41(82,"p",62),e.EFF(83),e.nI1(84,"date"),e.k0s()(),e.DNE(85,B,6,4,"div",38),e.k0s()(),e.j41(86,"div",68),e.DNE(87,U,2,0,"button",41),e.DNE(88,O,2,0,"button",42),e.j41(89,"button",69),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.closeDetailsModal())}),e.EFF(90,"Close"),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(9),e.JRh(t.selectedRequest.nsbOfficialName),e.R7$(5),e.JRh(t.selectedRequest.nsbAcronym||"Not provided"),e.R7$(5),e.Lme("",t.selectedRequest.countryName," (",t.selectedRequest.isoCode,")"),e.R7$(4),e.Y8G("ngIf",!t.canEditStatus()),e.R7$(1),e.Y8G("ngIf",t.canEditStatus()),e.R7$(9),e.JRh(t.selectedRequest.contactPersonName),e.R7$(5),e.JRh(t.selectedRequest.contactPersonTitle||"Not provided"),e.R7$(5),e.JRh(t.selectedRequest.contactEmail),e.R7$(5),e.JRh(t.selectedRequest.contactPhone||"Not provided"),e.R7$(5),e.JRh(t.selectedRequest.contactMobile||"Not provided"),e.R7$(9),e.JRh(t.selectedRequest.additionalUserSlotsRequested||0),e.R7$(5),e.Y8G("ngIf",t.selectedRequest.requestedRoles&&t.selectedRequest.requestedRoles.length>0),e.R7$(1),e.Y8G("ngIf",!t.selectedRequest.requestedRoles||0===t.selectedRequest.requestedRoles.length),e.R7$(4),e.Y8G("ngIf",t.selectedRequest.documents&&t.selectedRequest.documents.length>0),e.R7$(1),e.Y8G("ngIf",!t.selectedRequest.documents||0===t.selectedRequest.documents.length),e.R7$(1),e.Y8G("ngIf",t.selectedRequest.reviewedAt||t.selectedRequest.remarks),e.R7$(9),e.JRh(e.i5U(84,21,t.selectedRequest.createdAt,"medium")),e.R7$(2),e.Y8G("ngIf",t.selectedRequest.updatedAt),e.R7$(2),e.Y8G("ngIf",t.canApprove(t.selectedRequest)),e.R7$(1),e.Y8G("ngIf",t.canReject(t.selectedRequest))}}function P(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52)(4,"h2",53),e.EFF(5,"Registration Request Details"),e.k0s(),e.j41(6,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeDetailsModal())}),e.j41(7,"span",55),e.EFF(8,"\xd7"),e.k0s()()(),e.DNE(9,J,91,24,"div",56),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("ngIf",t.selectedRequest)}}function L(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",115),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(4);return e.Njj(r.viewDocument(o))}),e.EFF(1," View "),e.k0s()}}function H(s,n){if(1&s&&(e.j41(0,"li",111)(1,"div",31)(2,"span",112),e.EFF(3),e.k0s(),e.j41(4,"span",113),e.EFF(5),e.k0s()(),e.DNE(6,L,2,0,"button",114),e.k0s()),2&s){const t=n.$implicit;e.R7$(3),e.JRh(t.fileName),e.R7$(2),e.SpI("(",t.documentType,")"),e.R7$(1),e.Y8G("ngIf",t.id)}}function z(s,n){if(1&s&&(e.j41(0,"div",106)(1,"h4",107),e.qSk(),e.j41(2,"svg",108),e.nrm(3,"path",109),e.k0s(),e.EFF(4," Uploaded Documents "),e.k0s(),e.joV(),e.j41(5,"ul",72),e.DNE(6,H,7,3,"li",110),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(6),e.Y8G("ngForOf",t.selectedRequest.documents)}}function W(s,n){1&s&&(e.j41(0,"span",116),e.EFF(1,"*"),e.k0s())}function K(s,n){1&s&&(e.j41(0,"span",117),e.EFF(1,"(Optional)"),e.k0s())}function Q(s,n){if(1&s&&(e.j41(0,"div",57)(1,"div",94)(2,"h3",95),e.EFF(3),e.k0s(),e.j41(4,"div",96)(5,"div",43)(6,"span",97),e.EFF(7,"Country:"),e.k0s(),e.j41(8,"span",98),e.EFF(9),e.k0s()(),e.j41(10,"div",43)(11,"span",97),e.EFF(12,"Contact:"),e.k0s(),e.j41(13,"span",98),e.EFF(14),e.k0s()(),e.j41(15,"div",43)(16,"span",97),e.EFF(17,"Email:"),e.k0s(),e.j41(18,"span",98),e.EFF(19),e.k0s()()()(),e.DNE(20,z,7,1,"div",99),e.j41(21,"form",100)(22,"div",7)(23,"label",101),e.EFF(24," Remarks "),e.DNE(25,W,2,0,"span",102),e.DNE(26,K,2,0,"span",103),e.k0s(),e.nrm(27,"textarea",104),e.j41(28,"p",105),e.EFF(29),e.k0s()()()()),2&s){const t=e.XpG(2);e.R7$(3),e.JRh(t.selectedRequest.nsbOfficialName),e.R7$(6),e.JRh(t.selectedRequest.countryName),e.R7$(5),e.JRh(t.selectedRequest.contactPersonName),e.R7$(5),e.JRh(t.selectedRequest.contactEmail),e.R7$(1),e.Y8G("ngIf",t.selectedRequest.documents&&t.selectedRequest.documents.length>0),e.R7$(1),e.Y8G("formGroup",t.reviewForm),e.R7$(4),e.Y8G("ngIf","reject"===t.reviewAction),e.R7$(1),e.Y8G("ngIf","approve"===t.reviewAction),e.R7$(1),e.Y8G("placeholder","approve"===t.reviewAction?"Add optional remarks or notes about this approval...":"Enter the reason for rejection (required). This will be sent to the requester..."),e.R7$(2),e.SpI(" ","approve"===t.reviewAction?"Optional notes about this approval":"Required: Please provide a clear reason for rejection"," ")}}function Z(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.SpI(" ","approve"===t.reviewAction?"Approve Request":"Reject Request"," ")}}function ee(s,n){1&s&&(e.j41(0,"span",43),e.qSk(),e.j41(1,"svg",118),e.nrm(2,"circle",119)(3,"path",120),e.k0s(),e.EFF(4," Processing... "),e.k0s())}function te(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",81)(1,"div",82)(2,"div",83)(3,"div",84)(4,"div")(5,"h2",85),e.EFF(6),e.k0s(),e.j41(7,"p",86),e.EFF(8),e.k0s()(),e.j41(9,"button",87),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeReviewModal())}),e.qSk(),e.j41(10,"svg",88),e.nrm(11,"path",89),e.k0s()()()(),e.joV(),e.j41(12,"div",90),e.DNE(13,Q,30,10,"div",56),e.k0s(),e.j41(14,"div",91)(15,"button",92),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeReviewModal())}),e.EFF(16," Cancel "),e.k0s(),e.j41(17,"button",93),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.submitReview())}),e.DNE(18,Z,2,1,"span",38),e.DNE(19,ee,5,0,"span",35),e.k0s()()()()}if(2&s){const t=e.XpG();let i;e.R7$(2),e.Y8G("ngClass","approve"===t.reviewAction?"from-emerald-50 to-white":"from-rose-50 to-white"),e.R7$(4),e.SpI(" ","approve"===t.reviewAction?"Approve":"Reject"," Registration Request "),e.R7$(2),e.SpI(" ","approve"===t.reviewAction?"Confirm approval of this NSB registration request":"Confirm rejection of this NSB registration request"," "),e.R7$(5),e.Y8G("ngIf",t.selectedRequest),e.R7$(4),e.HbH("approve"===t.reviewAction?"px-5 py-2.5 text-sm font-semibold text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm":"px-5 py-2.5 text-sm font-semibold text-white bg-rose-600 rounded-lg hover:bg-rose-700 transition-colors focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"),e.Y8G("disabled",t.saving||"reject"===t.reviewAction&&!(null!=(i=t.reviewForm.get("remarks"))&&null!=i.value&&i.value.trim())),e.R7$(1),e.Y8G("ngIf",!t.saving),e.R7$(1),e.Y8G("ngIf",t.saving)}}function se(s,n){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=n.$implicit,i=e.XpG(3);e.Y8G("value",t.value)("disabled",t.value===i.selectedRequestForStatusChange.status),e.R7$(1),e.SpI(" ",t.value===i.selectedRequestForStatusChange.status?"Current: "+t.label:t.label," ")}}function ie(s,n){if(1&s&&(e.j41(0,"div",133)(1,"div",126),e.qSk(),e.j41(2,"svg",134),e.nrm(3,"path",135),e.k0s(),e.joV(),e.j41(4,"div")(5,"span",136),e.EFF(6,"New Status:"),e.k0s(),e.j41(7,"span",137),e.EFF(8),e.k0s()()()()),2&s){const t=e.XpG(3);e.R7$(7),e.HbH("chip "+t.getStatusColor(t.newStatus)),e.R7$(1),e.SpI(" ",t.getStatusLabelForChange(t.newStatus)," ")}}function oe(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",57)(1,"div",94)(2,"div",123)(3,"div",31)(4,"h3",124),e.EFF(5),e.k0s(),e.j41(6,"div",96)(7,"div",43)(8,"span",97),e.EFF(9,"Country:"),e.k0s(),e.j41(10,"span",98),e.EFF(11),e.k0s()(),e.j41(12,"div",43)(13,"span",97),e.EFF(14,"Contact:"),e.k0s(),e.j41(15,"span",98),e.EFF(16),e.k0s()()()()(),e.j41(17,"div",125)(18,"div",126)(19,"span",127),e.EFF(20,"Current Status:"),e.k0s(),e.j41(21,"span"),e.EFF(22),e.k0s()()()(),e.j41(23,"form",100)(24,"div",7)(25,"label",128),e.EFF(26," Select New Status "),e.j41(27,"span",116),e.EFF(28,"*"),e.k0s()(),e.j41(29,"select",129),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onStatusSelectChange(o))}),e.DNE(30,se,2,3,"option",46),e.k0s(),e.j41(31,"p",105),e.EFF(32,"Choose the new status for this registration request"),e.k0s()(),e.DNE(33,ie,9,3,"div",130),e.j41(34,"div",7)(35,"label",131),e.EFF(36," Comments / Reason "),e.j41(37,"span",117),e.EFF(38,"(Optional)"),e.k0s()(),e.nrm(39,"textarea",132),e.j41(40,"p",105),e.EFF(41,"Add context or notes about why the status is being changed"),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(5),e.JRh(t.selectedRequestForStatusChange.nsbOfficialName),e.R7$(6),e.JRh(t.selectedRequestForStatusChange.countryName),e.R7$(5),e.JRh(t.selectedRequestForStatusChange.contactPersonName),e.R7$(5),e.HbH("chip "+t.getStatusColor(t.selectedRequestForStatusChange.status)),e.R7$(1),e.SpI(" ",t.getStatusLabel(t.selectedRequestForStatusChange.status)," "),e.R7$(1),e.Y8G("formGroup",t.statusChangeForm),e.R7$(6),e.Y8G("value",t.newStatus||t.selectedRequestForStatusChange.status),e.R7$(1),e.Y8G("ngForOf",t.getStatusOptions()),e.R7$(3),e.Y8G("ngIf",t.newStatus&&t.newStatus!==t.selectedRequestForStatusChange.status)}}function ne(s,n){1&s&&(e.j41(0,"span"),e.EFF(1,"Confirm Status Change"),e.k0s())}function re(s,n){1&s&&(e.j41(0,"span",43),e.qSk(),e.j41(1,"svg",118),e.nrm(2,"circle",119)(3,"path",120),e.k0s(),e.EFF(4," Updating... "),e.k0s())}function ae(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",81)(1,"div",82)(2,"div",121)(3,"div",84)(4,"div")(5,"h2",85),e.EFF(6,"Change Request Status"),e.k0s(),e.j41(7,"p",86),e.EFF(8,"Update the status of this NSB registration request"),e.k0s()(),e.j41(9,"button",87),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeStatusChangeModal())}),e.qSk(),e.j41(10,"svg",88),e.nrm(11,"path",89),e.k0s()()()(),e.joV(),e.j41(12,"div",90),e.DNE(13,oe,42,10,"div",56),e.k0s(),e.j41(14,"div",91)(15,"button",92),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeStatusChangeModal())}),e.EFF(16," Cancel "),e.k0s(),e.j41(17,"button",122),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmStatusChange())}),e.DNE(18,ne,2,0,"span",38),e.DNE(19,re,5,0,"span",35),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(13),e.Y8G("ngIf",t.selectedRequestForStatusChange),e.R7$(4),e.Y8G("disabled",t.saving||!t.newStatus||t.newStatus===(null==t.selectedRequestForStatusChange?null:t.selectedRequestForStatusChange.status)),e.R7$(1),e.Y8G("ngIf",!t.saving),e.R7$(1),e.Y8G("ngIf",t.saving)}}const le=[{path:"",component:(()=>{class s{constructor(t,i,o){this.requestService=t,this.authService=i,this.fb=o,this.requests=[],this.selectedRequest=null,this.loading=!1,this.error="",this.saving=!1,this.statusFilter="",this.searchTerm="",this.showReviewModal=!1,this.showDetailsModal=!1,this.showStatusChangeModal=!1,this.reviewAction=null,this.selectedRequestForStatusChange=null,this.newStatus=null,this.filterForm=this.fb.group({status:[""],search:[""]}),this.reviewForm=this.fb.group({remarks:[""]}),this.statusChangeForm=this.fb.group({comments:[""]})}ngOnInit(){this.loadRequests(),this.setupFilterWatchers()}setupFilterWatchers(){this.filterForm.get("status")?.valueChanges.subscribe(t=>{this.statusFilter=t,this.loadRequests()}),this.filterForm.get("search")?.valueChanges.subscribe(t=>{this.searchTerm=t,this.loadRequests()})}loadRequests(){this.loading=!0,this.error="";const t={skip:0,limit:50};this.statusFilter&&(t.status=this.statusFilter),this.searchTerm&&(t.search=this.searchTerm),this.requestService.list(t).pipe((0,u.j)(()=>{this.loading=!1})).subscribe({next:i=>{this.requests=i.data||[]},error:i=>{this.error=i.error?.message||"Failed to load registration requests."}})}viewRequest(t){t.id?this.loadRequestDetails(t.id):this.error="Request ID not found."}loadRequestDetails(t){this.loading=!0,this.requestService.get(t).subscribe({next:i=>{this.selectedRequest=i,this.showDetailsModal=!0,this.loading=!1},error:i=>{this.error=i.error?.message||"Failed to load request details.",this.loading=!1}})}closeDetailsModal(){this.showDetailsModal=!1,this.selectedRequest=null}viewDocument(t){!this.selectedRequest?.id||!t.id||this.requestService.getDocumentBlob(this.selectedRequest.id,t.id).subscribe({next:i=>{const o=URL.createObjectURL(i);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),100)},error:i=>{this.error=i.error?.message||"Failed to load document. Please try again."}})}openReviewModal(t,i){this.selectedRequest=t,this.reviewAction=i,this.reviewForm.reset(),this.showReviewModal=!0}closeReviewModal(){this.showReviewModal=!1,this.reviewAction=null,this.selectedRequest=null,this.reviewForm.reset()}submitReview(){if(!this.selectedRequest||!this.reviewAction)return;this.saving=!0,this.error="";const t=this.reviewForm.get("remarks")?.value||"";if("reject"===this.reviewAction&&!t.trim())return this.error="Remarks are required when rejecting a request.",void(this.saving=!1);("approve"===this.reviewAction?this.requestService.approve(this.selectedRequest.id,t):this.requestService.reject(this.selectedRequest.id,t)).pipe((0,u.j)(()=>{this.saving=!1})).subscribe({next:()=>{this.closeReviewModal(),this.loadRequests()},error:o=>{this.error=o.error?.message||`Failed to ${this.reviewAction} request. Please try again.`}})}getStatusColor(t){switch(t){case"DRAFT":default:return"bg-slate-100 text-slate-700";case"SUBMITTED":case"UNDER_REVIEW":return"bg-blue-100 text-blue-700";case"APPROVED":return"bg-emerald-100 text-emerald-700";case"REJECTED":return"bg-red-100 text-red-700"}}getStatusLabel(t){switch(t){case"DRAFT":return"Draft";case"SUBMITTED":return"Submitted";case"UNDER_REVIEW":return"Under Review";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";default:return t}}canApprove(t){return t.status===c.i.SUBMITTED||t.status===c.i.UNDER_REVIEW}canReject(t){return t.status===c.i.SUBMITTED||t.status===c.i.UNDER_REVIEW}canEditStatus(){const t=this.authService.currentUserValue;if(!t)return!1;const i=t.roles||(t.role?[t.role]:[]);return i.includes(_.g.SUPER_ADMIN)||i.includes(_.g.ARSO_SECRETARIAT)}updateStatus(t,i){this.canEditStatus()&&(this.selectedRequestForStatusChange=t,this.newStatus=i,this.statusChangeForm.reset(),this.showStatusChangeModal=!0)}onStatusSelectChange(t){this.newStatus=t.target.value}closeStatusChangeModal(){this.showStatusChangeModal=!1,this.selectedRequestForStatusChange=null,this.newStatus=null,this.statusChangeForm.reset()}confirmStatusChange(){if(!this.selectedRequestForStatusChange||!this.newStatus)return;this.saving=!0,this.error="";const t=this.statusChangeForm.get("comments")?.value||"";this.requestService.updateStatus(this.selectedRequestForStatusChange.id,this.newStatus,t).pipe((0,u.j)(()=>{this.saving=!1})).subscribe({next:()=>{this.closeStatusChangeModal(),this.loadRequests(),this.showDetailsModal&&this.selectedRequest?.id===this.selectedRequestForStatusChange?.id&&this.loadRequestDetails(this.selectedRequest.id)},error:i=>{this.error=i.error?.message||"Failed to update status. Please try again."}})}getStatusLabelForChange(t){return this.getStatusLabel(t)}getStatusOptions(){return[{value:c.i.DRAFT,label:"Draft"},{value:c.i.SUBMITTED,label:"Submitted"},{value:c.i.UNDER_REVIEW,label:"Under Review"},{value:c.i.APPROVED,label:"Approved"},{value:c.i.REJECTED,label:"Rejected"}]}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(b.p),e.rXU(f.u),e.rXU(l.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-nsb-review"]],decls:41,vars:8,consts:[[1,"space-y-8"],[1,"card-surface","px-6","py-6"],[1,"flex","flex-col","gap-3"],[1,"text-xs","font-semibold","uppercase","tracking-[0.14em]","text-slate-500"],[1,"text-2xl","font-semibold","text-slate-900"],[1,"max-w-3xl","text-sm","text-slate-600"],[1,"grid","gap-4","md:grid-cols-2",3,"formGroup"],[1,"form-group"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value",""],["value","DRAFT"],["value","SUBMITTED"],["value","UNDER_REVIEW"],["value","APPROVED"],["value","REJECTED"],["for","search"],["type","text","id","search","formControlName","search","placeholder","Search by NSB name, acronym, or email",1,"form-control"],["class","alert alert-error",4,"ngIf"],[1,"text-lg","font-semibold","text-slate-900","mb-4"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",4,"ngIf"],[1,"alert","alert-error"],[1,"text-center","py-8"],[1,"text-slate-500"],[1,"space-y-4"],["class","border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors",4,"ngFor","ngForOf"],[1,"border","border-slate-200","rounded-lg","p-4","hover:border-blue-300","transition-colors"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-lg","font-semibold","text-slate-900"],[3,"class",4,"ngIf"],["class","flex items-center gap-2",4,"ngIf"],[1,"grid","gap-2","md:grid-cols-2","text-sm","text-slate-600"],[1,"font-medium"],[4,"ngIf"],[1,"flex","gap-2","ml-4"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"text-xs","text-slate-500"],[1,"rounded-lg","border","border-slate-300","bg-white","px-2","py-1","text-xs","font-semibold","focus:border-blue-600","focus:ring-1","focus:ring-blue-600","focus:outline-none","transition-colors",3,"value","change"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"btn","btn-primary",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","shadow-xl","max-w-4xl","w-full","mx-4","max-h-[90vh]","overflow-y-auto"],[1,"p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-slate-900"],[1,"text-slate-500","hover:text-slate-700",3,"click"],[1,"text-2xl"],["class","space-y-6",4,"ngIf"],[1,"space-y-6"],[1,"border","border-slate-200","rounded-lg","p-4"],[1,"font-semibold","text-slate-900","mb-4"],[1,"grid","gap-4","md:grid-cols-2","text-sm"],[1,"font-medium","text-slate-700"],[1,"text-slate-900","mt-1"],["class","mt-1",4,"ngIf"],["class","mt-1 flex items-center gap-2",4,"ngIf"],["class","space-y-2",4,"ngIf"],["class","text-slate-500 text-sm",4,"ngIf"],["class","border border-slate-200 rounded-lg p-4",4,"ngIf"],[1,"flex","gap-4","pt-4","border-t","border-slate-200"],["type","button",1,"btn","btn-secondary","ml-auto",3,"click"],[1,"mt-1"],[1,"mt-1","flex","items-center","gap-2"],[1,"space-y-2"],["class","flex items-center justify-between p-3 bg-slate-50 rounded border border-slate-200",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-3","bg-slate-50","rounded","border","border-slate-200"],[1,"font-medium","text-slate-900"],[1,"text-xs","text-slate-500","mt-1"],["class","text-xs text-slate-500",4,"ngIf"],["type","button","class","text-sm text-blue-600 hover:text-blue-800 hover:underline",3,"click",4,"ngIf"],["type","button",1,"text-sm","text-blue-600","hover:text-blue-800","hover:underline",3,"click"],[1,"text-slate-500","text-sm"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm","p-4"],[1,"bg-white","rounded-xl","shadow-2xl","max-w-2xl","w-full","overflow-hidden"],[1,"px-6","py-5","border-b","border-slate-200","bg-gradient-to-r","from-slate-50","to-white",3,"ngClass"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-slate-900"],[1,"text-sm","text-slate-500","mt-1"],["aria-label","Close modal",1,"text-slate-400","hover:text-slate-600","transition-colors","p-2","hover:bg-slate-100","rounded-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","max-h-[calc(90vh-140px)]","overflow-y-auto"],[1,"px-6","py-4","bg-slate-50","border-t","border-slate-200","flex","items-center","justify-end","gap-3"],["type","button",1,"px-5","py-2.5","text-sm","font-semibold","text-slate-700","bg-white","border-2","border-slate-300","rounded-lg","hover:bg-slate-50","transition-colors","focus:outline-none","focus:ring-2","focus:ring-slate-300",3,"click"],["type","button",3,"disabled","click"],[1,"border-2","border-slate-200","rounded-xl","p-5","bg-gradient-to-br","from-slate-50","to-white"],[1,"text-lg","font-bold","text-slate-900","mb-3"],[1,"space-y-2","text-sm"],[1,"font-semibold","text-slate-700"],[1,"text-slate-600"],["class","border-2 border-slate-200 rounded-xl p-5 bg-slate-50",4,"ngIf"],[1,"space-y-5",3,"formGroup"],["for","remarks",1,"block","text-sm","font-semibold","text-slate-700","mb-2"],["class","text-red-500",4,"ngIf"],["class","text-slate-400 font-normal",4,"ngIf"],["id","remarks","formControlName","remarks","rows","5",1,"form-control","border-2","border-slate-300","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","resize-none",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1.5"],[1,"border-2","border-slate-200","rounded-xl","p-5","bg-slate-50"],[1,"font-semibold","text-slate-900","mb-3","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-slate-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["class","flex items-center justify-between p-2 bg-white rounded-lg border border-slate-200",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-2","bg-white","rounded-lg","border","border-slate-200"],[1,"text-sm","font-medium","text-slate-900"],[1,"text-xs","text-slate-500","ml-2"],["type","button","class","text-xs text-blue-600 hover:text-blue-800 hover:underline font-medium px-2 py-1 rounded hover:bg-blue-50 transition-colors",3,"click",4,"ngIf"],["type","button",1,"text-xs","text-blue-600","hover:text-blue-800","hover:underline","font-medium","px-2","py-1","rounded","hover:bg-blue-50","transition-colors",3,"click"],[1,"text-red-500"],[1,"text-slate-400","font-normal"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"px-6","py-5","border-b","border-slate-200","bg-gradient-to-r","from-slate-50","to-white"],["type","button",1,"px-5","py-2.5","text-sm","font-semibold","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled","click"],[1,"flex","items-start","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","mb-2"],[1,"pt-4","border-t","border-slate-200"],[1,"flex","items-center","gap-3"],[1,"text-sm","font-semibold","text-slate-700"],["for","statusSelect",1,"block","text-sm","font-semibold","text-slate-700","mb-2"],["id","statusSelect",1,"form-control","border-2","border-slate-300","focus:border-blue-500","focus:ring-2","focus:ring-blue-200",3,"value","change"],["class","border-2 border-blue-200 rounded-lg p-4 bg-blue-50",4,"ngIf"],["for","statusChangeComments",1,"block","text-sm","font-semibold","text-slate-700","mb-2"],["id","statusChangeComments","formControlName","comments","rows","5","placeholder","Enter any comments or reason for this status change. This will be visible to the requester...",1,"form-control","border-2","border-slate-300","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","resize-none"],[1,"border-2","border-blue-200","rounded-lg","p-4","bg-blue-50"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-semibold","text-blue-900"],[1,"ml-2"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"section",1)(2,"div",2)(3,"p",3),e.EFF(4,"ARSO Secretariat"),e.k0s(),e.j41(5,"h1",4),e.EFF(6,"NSB Registration Requests Review"),e.k0s(),e.j41(7,"p",5),e.EFF(8," Review and approve/reject NSB registration requests from National Standards Bodies. "),e.k0s()()(),e.j41(9,"section",1)(10,"form",6)(11,"div",7)(12,"label",8),e.EFF(13,"Status Filter"),e.k0s(),e.j41(14,"select",9)(15,"option",10),e.EFF(16,"All Statuses"),e.k0s(),e.j41(17,"option",11),e.EFF(18,"Draft"),e.k0s(),e.j41(19,"option",12),e.EFF(20,"Submitted"),e.k0s(),e.j41(21,"option",13),e.EFF(22,"Under Review"),e.k0s(),e.j41(23,"option",14),e.EFF(24,"Approved"),e.k0s(),e.j41(25,"option",15),e.EFF(26,"Rejected"),e.k0s()()(),e.j41(27,"div",7)(28,"label",16),e.EFF(29,"Search"),e.k0s(),e.nrm(30,"input",17),e.k0s()()(),e.DNE(31,R,2,1,"div",18),e.j41(32,"section",1)(33,"h2",19),e.EFF(34,"Registration Requests"),e.k0s(),e.DNE(35,h,3,0,"div",20),e.DNE(36,g,3,0,"div",20),e.DNE(37,C,2,1,"div",21),e.k0s(),e.DNE(38,P,10,1,"div",22),e.DNE(39,te,20,9,"div",23),e.DNE(40,ae,20,4,"div",23),e.k0s()),2&i&&(e.R7$(10),e.Y8G("formGroup",o.filterForm),e.R7$(21),e.Y8G("ngIf",o.error),e.R7$(4),e.Y8G("ngIf",o.loading),e.R7$(1),e.Y8G("ngIf",!o.loading&&0===o.requests.length),e.R7$(1),e.Y8G("ngIf",!o.loading&&o.requests.length>0),e.R7$(1),e.Y8G("ngIf",o.showDetailsModal),e.R7$(1),e.Y8G("ngIf",o.showReviewModal),e.R7$(1),e.Y8G("ngIf",o.showStatusChangeModal))},dependencies:[d.YU,d.Sq,d.bT,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.j4,l.JD,d.vh]})}}return s})()}];let ce=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[d.MD,l.X1,m.iI.forChild(le)]})}}return s})()}}]);