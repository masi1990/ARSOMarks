"use strict";(self.webpackChunkarsomarks_frontend=self.webpackChunkarsomarks_frontend||[]).push([[873],{8873:(D,p,d)=>{d.r(p),d.d(p,{ReferenceDataModule:()=>S});var l=d(177),r=d(9417),u=d(1377),t=d(540),m=d(5312),g=d(1626);let h=(()=>{class n{constructor(e){this.http=e,this.baseUrl=`${m.c.apiBase}/reference/regions`}list(){return this.http.get(this.baseUrl)}get(e){return this.http.get(`${this.baseUrl}/${e}`)}create(e){return this.http.post(this.baseUrl,e)}update(e,i){return this.http.put(`${this.baseUrl}/${e}`,i)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.EFF(1,"Cancel"),t.k0s()}}function b(n,s){if(1&n&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.JRh(e.error)}}function _(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"button",15),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.startEdit(c))}),t.EFF(9,"Edit"),t.k0s(),t.j41(10,"button",15),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.delete(c))}),t.EFF(11,"Delete"),t.k0s()()()}if(2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.description)}}let C=(()=>{class n{constructor(e,i){this.regionService=e,this.fb=i,this.regions=[],this.editingId=null,this.loading=!1,this.error="",this.form=this.fb.group({code:["",[r.k0.required]],name:["",[r.k0.required]],description:[""]})}ngOnInit(){this.load()}load(){this.loading=!0,this.regionService.list().subscribe({next:e=>{this.regions=e||[],this.loading=!1},error:()=>{this.error="Failed to load regions",this.loading=!1}})}startEdit(e){this.editingId=e.id,this.form.patchValue(e)}cancelEdit(){this.editingId=null,this.form.reset()}submit(){if(this.form.invalid)return;this.loading=!0;const e=this.form.value;(this.editingId?this.regionService.update(this.editingId,e):this.regionService.create(e)).subscribe({next:()=>{this.cancelEdit(),this.load()},error:()=>{this.error="Save failed",this.loading=!1}})}delete(e){confirm(`Delete region ${e.name}?`)&&this.regionService.delete(e.id).subscribe({next:()=>this.load(),error:()=>this.error="Delete failed"})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(h),t.rXU(r.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-region-list"]],decls:35,vars:6,consts:[[1,"page"],[1,"card"],[1,"form",3,"formGroup","ngSubmit"],[1,"row"],["formControlName","code"],["formControlName","name"],["formControlName","description"],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"click",4,"ngIf"],["class","error",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"error"],[3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Regions"),t.k0s(),t.j41(3,"div",1)(4,"form",2),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(5,"div",3)(6,"label"),t.EFF(7,"Code"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"div",3)(10,"label"),t.EFF(11,"Name"),t.k0s(),t.nrm(12,"input",5),t.k0s(),t.j41(13,"div",3)(14,"label"),t.EFF(15,"Description"),t.k0s(),t.nrm(16,"textarea",6),t.k0s(),t.j41(17,"div",7)(18,"button",8),t.EFF(19),t.k0s(),t.DNE(20,f,2,0,"button",9),t.k0s()()(),t.DNE(21,b,2,1,"div",10),t.j41(22,"table",11)(23,"thead")(24,"tr")(25,"th"),t.EFF(26,"Code"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Name"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Description"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Actions"),t.k0s()()(),t.j41(33,"tbody"),t.DNE(34,_,12,3,"tr",12),t.k0s()()()),2&i&&(t.R7$(4),t.Y8G("formGroup",o.form),t.R7$(14),t.Y8G("disabled",o.loading||o.form.invalid),t.R7$(1),t.JRh(o.editingId?"Update":"Create"),t.R7$(1),t.Y8G("ngIf",o.editingId),t.R7$(1),t.Y8G("ngIf",o.error),t.R7$(13),t.Y8G("ngForOf",o.regions))},dependencies:[l.Sq,l.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".page[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;padding:10px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;padding:16px;margin-bottom:16px;border-radius:8px}.form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:8px;border:1px solid #d0d0d0;border-radius:4px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;background:#2c3e50;color:#fff;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #e0e0e0}.error[_ngcontent-%COMP%]{color:#c0392b;margin-bottom:10px}"]})}}return n})();var F=d(5882);function k(n,s){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.name)}}function R(n,s){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.name)}}function x(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.EFF(1,"Cancel"),t.k0s()}}function E(n,s){if(1&n&&(t.j41(0,"div",19),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.JRh(e.error)}}function j(n,s){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("",e.name," ")}}function v(n,s){if(1&n&&(t.j41(0,"span"),t.DNE(1,j,2,1,"ng-container",21),t.k0s()),2&n){const e=s.$implicit,i=t.XpG().$implicit,o=t.XpG();t.R7$(1),t.Y8G("ngIf",o.hasRec(i,e.id))}}function I(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.DNE(8,v,2,1,"span",16),t.k0s(),t.j41(9,"td")(10,"button",20),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.startEdit(c))}),t.EFF(11,"Edit"),t.k0s(),t.j41(12,"button",20),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.delete(c))}),t.EFF(13,"Delete"),t.k0s()()()}if(2&n){const e=s.$implicit,i=t.XpG();t.R7$(2),t.JRh(e.isoCode),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(i.getRegionName(e.regionId)),t.R7$(2),t.Y8G("ngForOf",i.recs)}}let $=(()=>{class n{constructor(e,i){this.countryService=e,this.fb=i,this.countries=[],this.regions=[],this.recs=[],this.editingId=null,this.loading=!1,this.error="",this.form=this.fb.group({isoCode:["",[r.k0.required,r.k0.minLength(2),r.k0.maxLength(2)]],name:["",r.k0.required],regionId:["",r.k0.required],recIds:[[]],continent:[""]})}ngOnInit(){this.load(),this.loadRegions(),this.loadRecs()}load(){this.loading=!0,this.countryService.getCountries().subscribe({next:e=>{this.countries=e||[],this.loading=!1},error:()=>{this.error="Failed to load countries",this.loading=!1}})}loadRegions(){this.countryService.getRegions().subscribe({next:e=>this.regions=e||[],error:()=>this.regions=[]})}loadRecs(){this.countryService.getRecs().subscribe({next:e=>this.recs=e||[],error:()=>this.recs=[]})}startEdit(e){this.editingId=e.id,this.form.patchValue({isoCode:e.isoCode,name:e.name,regionId:e.regionId,continent:e.continent,recIds:e.recIds||[]})}cancelEdit(){this.editingId=null,this.form.reset({recIds:[]})}submit(){if(this.form.invalid)return;this.loading=!0;const e=this.form.value;(this.editingId?this.countryService.updateCountry(this.editingId,e):this.countryService.createCountry(e)).subscribe({next:()=>{this.cancelEdit(),this.load()},error:()=>{this.error="Save failed",this.loading=!1}})}delete(e){confirm(`Delete country ${e.name}?`)&&this.countryService.deleteCountry(e.id).subscribe({next:()=>this.load(),error:()=>this.error="Delete failed"})}trackById(e,i){return i.id}getRegionName(e){return this.regions.find(i=>i.id===e)?.name||""}hasRec(e,i){const o=e.recIds;return!!Array.isArray(o)&&o.includes(i)}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(F.o),t.rXU(r.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-country-list"]],decls:49,vars:8,consts:[[1,"page"],[1,"card"],[1,"form",3,"formGroup","ngSubmit"],[1,"row"],["formControlName","isoCode"],["formControlName","name"],["formControlName","regionId"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["multiple","","formControlName","recIds"],["formControlName","continent"],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"click",4,"ngIf"],["class","error",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[3,"value"],["type","button",3,"click"],[1,"error"],[3,"click"],[4,"ngIf"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Countries"),t.k0s(),t.j41(3,"div",1)(4,"form",2),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(5,"div",3)(6,"label"),t.EFF(7,"ISO Code"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"div",3)(10,"label"),t.EFF(11,"Name"),t.k0s(),t.nrm(12,"input",5),t.k0s(),t.j41(13,"div",3)(14,"label"),t.EFF(15,"Region"),t.k0s(),t.j41(16,"select",6)(17,"option",7),t.EFF(18,"Select region"),t.k0s(),t.DNE(19,k,2,2,"option",8),t.k0s()(),t.j41(20,"div",3)(21,"label"),t.EFF(22,"RECs (multi-select)"),t.k0s(),t.j41(23,"select",9),t.DNE(24,R,2,2,"option",8),t.k0s()(),t.j41(25,"div",3)(26,"label"),t.EFF(27,"Continent"),t.k0s(),t.nrm(28,"input",10),t.k0s(),t.j41(29,"div",11)(30,"button",12),t.EFF(31),t.k0s(),t.DNE(32,x,2,0,"button",13),t.k0s()()(),t.DNE(33,E,2,1,"div",14),t.j41(34,"table",15)(35,"thead")(36,"tr")(37,"th"),t.EFF(38,"ISO"),t.k0s(),t.j41(39,"th"),t.EFF(40,"Name"),t.k0s(),t.j41(41,"th"),t.EFF(42,"Region"),t.k0s(),t.j41(43,"th"),t.EFF(44,"RECs"),t.k0s(),t.j41(45,"th"),t.EFF(46,"Actions"),t.k0s()()(),t.j41(47,"tbody"),t.DNE(48,I,14,4,"tr",16),t.k0s()()()),2&i&&(t.R7$(4),t.Y8G("formGroup",o.form),t.R7$(15),t.Y8G("ngForOf",o.regions),t.R7$(5),t.Y8G("ngForOf",o.recs),t.R7$(6),t.Y8G("disabled",o.loading||o.form.invalid),t.R7$(1),t.JRh(o.editingId?"Update":"Create"),t.R7$(1),t.Y8G("ngIf",o.editingId),t.R7$(1),t.Y8G("ngIf",o.error),t.R7$(15),t.Y8G("ngForOf",o.countries))},dependencies:[l.Sq,l.bT,r.qT,r.xH,r.y7,r.me,r.wz,r.W0,r.BC,r.cb,r.j4,r.JD],styles:[".page[_ngcontent-%COMP%]{max-width:1000px;margin:20px auto;padding:10px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;padding:16px;margin-bottom:16px;border-radius:8px}.form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:8px;border:1px solid #d0d0d0;border-radius:4px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;background:#2c3e50;color:#fff;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #e0e0e0}.error[_ngcontent-%COMP%]{color:#c0392b;margin-bottom:10px}"]})}}return n})(),y=(()=>{class n{constructor(e){this.http=e,this.baseUrl=`${m.c.apiBase}/reference/recs`}list(){return this.http.get(this.baseUrl)}get(e){return this.http.get(`${this.baseUrl}/${e}`)}create(e){return this.http.post(this.baseUrl,e)}update(e,i){return this.http.put(`${this.baseUrl}/${e}`,i)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function O(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.EFF(1,"Cancel"),t.k0s()}}function M(n,s){if(1&n&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.JRh(e.error)}}function P(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"button",15),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.startEdit(c))}),t.EFF(9,"Edit"),t.k0s(),t.j41(10,"button",15),t.bIt("click",function(){const c=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.delete(c))}),t.EFF(11,"Delete"),t.k0s()()()}if(2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.description)}}const G=[{path:"regions",component:C},{path:"countries",component:$},{path:"recs",component:(()=>{class n{constructor(e,i){this.recService=e,this.fb=i,this.recs=[],this.editingId=null,this.loading=!1,this.error="",this.form=this.fb.group({code:["",r.k0.required],name:["",r.k0.required],description:[""]})}ngOnInit(){this.load()}load(){this.loading=!0,this.recService.list().subscribe({next:e=>{this.recs=e||[],this.loading=!1},error:()=>{this.error="Failed to load RECs",this.loading=!1}})}startEdit(e){this.editingId=e.id,this.form.patchValue(e)}cancelEdit(){this.editingId=null,this.form.reset()}submit(){if(this.form.invalid)return;this.loading=!0;const e=this.form.value;(this.editingId?this.recService.update(this.editingId,e):this.recService.create(e)).subscribe({next:()=>{this.cancelEdit(),this.load()},error:()=>{this.error="Save failed",this.loading=!1}})}delete(e){confirm(`Delete REC ${e.name}?`)&&this.recService.delete(e.id).subscribe({next:()=>this.load(),error:()=>this.error="Delete failed"})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(y),t.rXU(r.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-rec-list"]],decls:35,vars:6,consts:[[1,"page"],[1,"card"],[1,"form",3,"formGroup","ngSubmit"],[1,"row"],["formControlName","code"],["formControlName","name"],["formControlName","description"],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"click",4,"ngIf"],["class","error",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"error"],[3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Regional Economic Communities"),t.k0s(),t.j41(3,"div",1)(4,"form",2),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(5,"div",3)(6,"label"),t.EFF(7,"Code"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"div",3)(10,"label"),t.EFF(11,"Name"),t.k0s(),t.nrm(12,"input",5),t.k0s(),t.j41(13,"div",3)(14,"label"),t.EFF(15,"Description"),t.k0s(),t.nrm(16,"textarea",6),t.k0s(),t.j41(17,"div",7)(18,"button",8),t.EFF(19),t.k0s(),t.DNE(20,O,2,0,"button",9),t.k0s()()(),t.DNE(21,M,2,1,"div",10),t.j41(22,"table",11)(23,"thead")(24,"tr")(25,"th"),t.EFF(26,"Code"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Name"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Description"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Actions"),t.k0s()()(),t.j41(33,"tbody"),t.DNE(34,P,12,3,"tr",12),t.k0s()()()),2&i&&(t.R7$(4),t.Y8G("formGroup",o.form),t.R7$(14),t.Y8G("disabled",o.loading||o.form.invalid),t.R7$(1),t.JRh(o.editingId?"Update":"Create"),t.R7$(1),t.Y8G("ngIf",o.editingId),t.R7$(1),t.Y8G("ngIf",o.error),t.R7$(13),t.Y8G("ngForOf",o.recs))},dependencies:[l.Sq,l.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".page[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;padding:10px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;padding:16px;margin-bottom:16px;border-radius:8px}.form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:8px;border:1px solid #d0d0d0;border-radius:4px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;background:#2c3e50;color:#fff;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #e0e0e0}.error[_ngcontent-%COMP%]{color:#c0392b;margin-bottom:10px}"]})}}return n})()},{path:"",redirectTo:"regions",pathMatch:"full"}];let N=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(G),u.iI]})}}return n})(),S=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[l.MD,r.X1,N]})}}return n})()}}]);