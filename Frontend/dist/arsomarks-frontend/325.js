"use strict";(self.webpackChunkarsomarks_frontend=self.webpackChunkarsomarks_frontend||[]).push([[325],{3325:(F,h,o)=>{o.r(h),o.d(h,{StakeholderRegistryListModule:()=>R});var d=o(177),c=o(1377),l=o(9417),u=o(1749),t=o(6276),f=o(4183),m=o(3769);function p(s,a){if(1&s&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&s){const e=t.XpG();t.R7$(1),t.SpI(" ",e.error," ")}}function b(s,a){1&s&&(t.j41(0,"div",15)(1,"p",16),t.EFF(2,"Loading..."),t.k0s()())}function v(s,a){1&s&&(t.j41(0,"div",15)(1,"p",16),t.EFF(2,"No stakeholder registries found."),t.k0s()())}function x(s,a){if(1&s&&(t.j41(0,"div",31),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.shortName)}}function S(s,a){if(1&s){const e=t.RV6();t.j41(0,"tr",23)(1,"td",24)(2,"div",25),t.EFF(3),t.k0s(),t.DNE(4,x,2,1,"div",26),t.k0s(),t.j41(5,"td",24)(6,"div",27),t.EFF(7),t.k0s()(),t.j41(8,"td",24)(9,"span"),t.EFF(10),t.k0s()(),t.j41(11,"td",28),t.EFF(12),t.k0s(),t.j41(13,"td",29)(14,"button",30),t.bIt("click",function(){const n=t.eBV(e).$implicit,g=t.XpG(2);return t.Njj(g.viewRegistry(n))}),t.EFF(15," View "),t.k0s()()()}if(2&s){const e=a.$implicit,r=t.XpG(2);t.R7$(3),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.shortName),t.R7$(3),t.JRh((null==e.country?null:e.country.name)||"-"),t.R7$(2),t.ZvI("px-2 py-1 text-xs font-semibold rounded-full ",r.getStatusBadgeClass(e.stakeholderRegistryStatus),""),t.R7$(1),t.SpI(" ",r.getStatusLabel(e.stakeholderRegistryStatus)," "),t.R7$(2),t.SpI(" ",r.formatDate(e.stakeholderRegistrySubmittedAt)," ")}}function y(s,a){if(1&s&&(t.j41(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr")(4,"th",20),t.EFF(5,"NSB Name"),t.k0s(),t.j41(6,"th",20),t.EFF(7,"Country"),t.k0s(),t.j41(8,"th",20),t.EFF(9,"Status"),t.k0s(),t.j41(10,"th",20),t.EFF(11,"Submitted At"),t.k0s(),t.j41(12,"th",20),t.EFF(13,"Actions"),t.k0s()()(),t.j41(14,"tbody",21),t.DNE(15,S,16,8,"tr",22),t.k0s()()()),2&s){const e=t.XpG();t.R7$(15),t.Y8G("ngForOf",e.filteredNsbs)}}const k=[{path:"",component:(()=>{class s{constructor(e,r,i){this.nsbService=e,this.authService=r,this.router=i,this.nsbs=[],this.loading=!1,this.error="",this.filterStatus="ALL"}ngOnInit(){this.loadRegistries()}loadRegistries(){this.loading=!0,this.error="";const e=this.authService.currentUserValue,r=e?.roles||(e?.role?[e.role]:[]);r.includes(u.g.SUPER_ADMIN)||r.includes(u.g.ARSO_SECRETARIAT)?this.nsbService.getNsbList({limit:1e3}).subscribe({next:n=>{this.nsbs=n.data||[],this.loading=!1},error:()=>{this.error="Failed to load stakeholder registries.",this.loading=!1}}):r.includes(u.g.NSB_ADMIN)?this.nsbService.getMyNsb().subscribe({next:n=>{this.nsbs=n?[n]:[],this.loading=!1},error:()=>{this.error="Failed to load your stakeholder registry.",this.loading=!1}}):(this.error="You do not have permission to view stakeholder registries.",this.loading=!1)}get filteredNsbs(){return"ALL"===this.filterStatus?this.nsbs:this.nsbs.filter(e=>e.stakeholderRegistryStatus===this.filterStatus)}getStatusBadgeClass(e){switch(e){case"SUBMITTED":return"bg-emerald-100 text-emerald-800";case"DRAFT":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}}getStatusLabel(e){switch(e){case"SUBMITTED":return"Submitted";case"DRAFT":return"Draft";default:return"Not Started"}}viewRegistry(e){this.router.navigate(["/nsb/stakeholder-registry"])}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(f.B),t.rXU(m.u),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-stakeholder-registry-list"]],decls:21,vars:5,consts:[[1,"w-full","max-w-7xl","mx-auto"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-slate-100","bg-slate-50/50"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-slate-900"],[1,"mt-1","text-sm","text-slate-500"],[1,"flex","gap-3"],[1,"px-4","py-2","text-sm","border","border-slate-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModel","ngModelChange"],["value","ALL"],["value","DRAFT"],["value","SUBMITTED"],["class","mx-8 mt-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"mx-8","mt-6","p-4","bg-red-50","border","border-red-200","rounded-lg","text-red-800"],[1,"text-center","py-12"],[1,"text-slate-500"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-slate-50","border-b","border-slate-200"],[1,"px-6","py-3","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-slate-700"],[1,"bg-white","divide-y","divide-slate-200"],["class","hover:bg-slate-50",4,"ngFor","ngForOf"],[1,"hover:bg-slate-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-slate-900"],["class","text-sm text-slate-500",4,"ngIf"],[1,"text-sm","text-slate-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-slate-500"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-900","font-semibold",3,"click"],[1,"text-sm","text-slate-500"]],template:function(r,i){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),t.EFF(6,"Stakeholder Registry Status"),t.k0s(),t.j41(7,"p",5),t.EFF(8,"View and manage stakeholder registry submissions"),t.k0s()(),t.j41(9,"div",6)(10,"select",7),t.bIt("ngModelChange",function(g){return i.filterStatus=g})("ngModelChange",function(){return i.loadRegistries()}),t.j41(11,"option",8),t.EFF(12,"All Statuses"),t.k0s(),t.j41(13,"option",9),t.EFF(14,"Draft"),t.k0s(),t.j41(15,"option",10),t.EFF(16,"Submitted"),t.k0s()()()()(),t.DNE(17,p,2,1,"div",11),t.DNE(18,b,3,0,"div",12),t.DNE(19,v,3,0,"div",12),t.DNE(20,y,16,1,"div",13),t.k0s()()),2&r&&(t.R7$(10),t.Y8G("ngModel",i.filterStatus),t.R7$(7),t.Y8G("ngIf",i.error),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.filteredNsbs.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.filteredNsbs.length>0))},dependencies:[d.Sq,d.bT,l.xH,l.y7,l.wz,l.BC,l.vS],styles:["[_nghost-%COMP%]{display:block}"]})}}return s})()}];let R=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[d.MD,l.YN,c.iI.forChild(k)]})}}return s})()}}]);