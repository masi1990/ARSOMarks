{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../modules/complaints/services/complaints.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nfunction PublicComplaintComponent_div_90_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction PublicComplaintComponent_div_91_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.success);\n  }\n}\nexport let PublicComplaintComponent = /*#__PURE__*/(() => {\n  class PublicComplaintComponent {\n    constructor(fb, complaintsService) {\n      this.fb = fb;\n      this.complaintsService = complaintsService;\n      this.error = '';\n      this.success = '';\n      this.selectedEvidenceFile = null;\n      this.complaintForm = this.fb.group({\n        complainantName: ['', Validators.required],\n        complainantEmail: ['', [Validators.required, Validators.email]],\n        complainantPhone: [''],\n        subject: ['', Validators.required],\n        description: ['', [Validators.required, Validators.minLength(10)]],\n        referenceType: [''],\n        referenceId: ['']\n      });\n    }\n    onEvidenceSelected(event) {\n      const input = event.target;\n      this.selectedEvidenceFile = input.files && input.files.length > 0 ? input.files[0] : null;\n    }\n    submitComplaint() {\n      this.error = '';\n      this.success = '';\n      if (this.complaintForm.invalid) {\n        this.error = 'Please complete the required fields';\n        return;\n      }\n      this.complaintsService.createComplaint(this.complaintForm.value).subscribe({\n        next: complaint => {\n          if (this.selectedEvidenceFile) {\n            this.complaintsService.uploadComplaintEvidence(complaint.id, this.selectedEvidenceFile).subscribe({\n              next: () => {\n                this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n                this.complaintForm.reset();\n                this.selectedEvidenceFile = null;\n              },\n              error: () => {\n                this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n                this.error = 'Complaint created but evidence upload failed';\n              }\n            });\n          } else {\n            this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n            this.complaintForm.reset();\n          }\n        },\n        error: () => {\n          this.error = 'Failed to submit complaint';\n        }\n      });\n    }\n    static {\n      this.ɵfac = function PublicComplaintComponent_Factory(t) {\n        return new (t || PublicComplaintComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ComplaintsService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PublicComplaintComponent,\n        selectors: [[\"app-public-complaint\"]],\n        decls: 92,\n        vars: 3,\n        consts: [[1, \"min-h-screen\", \"bg-slate-50\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\", \"py-8\", \"lg:grid\", \"lg:grid-cols-[320px,1fr]\", \"lg:gap-6\"], [1, \"hidden\", \"lg:flex\", \"flex-col\", \"gap-4\", \"rounded-2xl\", \"border\", \"border-slate-200\", \"bg-white\", \"p-6\", \"shadow-sm\"], [1, \"text-xs\", \"font-semibold\", \"uppercase\", \"tracking-[0.14em]\", \"text-blue-600\"], [1, \"text-xl\", \"font-bold\", \"text-slate-900\", \"mt-1\"], [1, \"text-sm\", \"text-slate-600\", \"mt-1\"], [\"routerLink\", \"/\", 1, \"inline-flex\", \"items-center\", \"gap-2\", \"text-sm\", \"font-semibold\", \"text-slate-700\", \"hover:text-blue-700\"], [1, \"space-y-2\"], [\"routerLink\", \"/traceability\", 1, \"sidebar-link\"], [1, \"text-sm\", \"font-semibold\", \"text-slate-900\", \"group-hover:text-blue-700\"], [1, \"text-xs\", \"text-slate-600\"], [1, \"text-blue-500\"], [\"routerLink\", \"/complaints\", 1, \"sidebar-link\"], [\"routerLink\", \"/registry\", 1, \"sidebar-link\"], [\"routerLink\", \"/portal/shared-tools\", 1, \"sidebar-link\"], [1, \"space-y-6\"], [\"routerLink\", \"/\", 1, \"inline-flex\", \"lg:hidden\", \"items-center\", \"gap-2\", \"text-sm\", \"font-semibold\", \"text-slate-700\", \"hover:text-blue-700\"], [1, \"rounded-2xl\", \"bg-white\", \"border\", \"border-slate-200\", \"shadow-sm\", \"p-6\", \"space-y-3\"], [1, \"text-2xl\", \"font-bold\", \"text-slate-900\"], [1, \"text-sm\", \"text-slate-600\"], [1, \"space-y-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"grid\", \"gap-4\", \"md:grid-cols-2\"], [1, \"form-field\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"complainantName\", 1, \"form-input\"], [\"type\", \"email\", \"formControlName\", \"complainantEmail\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"complainantPhone\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"subject\", 1, \"form-input\"], [\"rows\", \"5\", \"formControlName\", \"description\", 1, \"form-textarea\"], [\"type\", \"text\", \"formControlName\", \"referenceType\", \"placeholder\", \"MARK_LICENSE, PRODUCT_CERT, etc.\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"referenceId\", 1, \"form-input\"], [\"type\", \"file\", 1, \"form-input\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn-primary\", \"w-full\", \"md:w-auto\"], [\"class\", \"text-rose-700 bg-rose-50 border border-rose-200 rounded-lg px-3 py-2 text-sm\", 4, \"ngIf\"], [\"class\", \"text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2 text-sm\", 4, \"ngIf\"], [1, \"text-rose-700\", \"bg-rose-50\", \"border\", \"border-rose-200\", \"rounded-lg\", \"px-3\", \"py-2\", \"text-sm\"], [1, \"text-emerald-700\", \"bg-emerald-50\", \"border\", \"border-emerald-200\", \"rounded-lg\", \"px-3\", \"py-2\", \"text-sm\"]],\n        template: function PublicComplaintComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"aside\", 2)(3, \"div\")(4, \"p\", 3);\n            i0.ɵɵtext(5, \"Public tools\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"h2\", 4);\n            i0.ɵɵtext(7, \"Public Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"p\", 5);\n            i0.ɵɵtext(9, \"Verify products, submit complaints, or search certified items without logging in.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"button\", 6);\n            i0.ɵɵtext(11, \" \\u2190 Back to Dashboard \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 7)(13, \"a\", 8)(14, \"div\")(15, \"p\", 9);\n            i0.ɵɵtext(16, \"Traceability & Verification\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"p\", 10);\n            i0.ɵɵtext(18, \"Scan QR or paste token\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"span\", 11);\n            i0.ɵɵtext(20, \"\\u2192\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"a\", 12)(22, \"div\")(23, \"p\", 9);\n            i0.ɵɵtext(24, \"Public Complaints\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"p\", 10);\n            i0.ɵɵtext(26, \"Quality issues or mark misuse\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(27, \"span\", 11);\n            i0.ɵɵtext(28, \"\\u2192\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(29, \"a\", 13)(30, \"div\")(31, \"p\", 9);\n            i0.ɵɵtext(32, \"Certified Products Registry\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"p\", 10);\n            i0.ɵɵtext(34, \"Search by brand, standard, country\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(35, \"span\", 11);\n            i0.ɵɵtext(36, \"\\u2192\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(37, \"a\", 14)(38, \"div\")(39, \"p\", 9);\n            i0.ɵɵtext(40, \"Shared Tools\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"p\", 10);\n            i0.ɵɵtext(42, \"Resources & guides\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(43, \"span\", 11);\n            i0.ɵɵtext(44, \"\\u2192\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(45, \"div\", 15)(46, \"button\", 16);\n            i0.ɵɵtext(47, \" \\u2190 Back to Dashboard \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(48, \"section\", 17)(49, \"h2\", 18);\n            i0.ɵɵtext(50, \"Submit a Complaint\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(51, \"p\", 19);\n            i0.ɵɵtext(52, \"Use this form to submit a complaint about marks, certifications, or services.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(53, \"form\", 20);\n            i0.ɵɵlistener(\"ngSubmit\", function PublicComplaintComponent_Template_form_ngSubmit_53_listener() {\n              return ctx.submitComplaint();\n            });\n            i0.ɵɵelementStart(54, \"div\", 21)(55, \"label\", 22)(56, \"span\", 23);\n            i0.ɵɵtext(57, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(58, \"input\", 24);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(59, \"label\", 22)(60, \"span\", 23);\n            i0.ɵɵtext(61, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(62, \"input\", 25);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(63, \"label\", 22)(64, \"span\", 23);\n            i0.ɵɵtext(65, \"Phone (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(66, \"input\", 26);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(67, \"label\", 22)(68, \"span\", 23);\n            i0.ɵɵtext(69, \"Subject\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(70, \"input\", 27);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(71, \"label\", 22)(72, \"span\", 23);\n            i0.ɵɵtext(73, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(74, \"textarea\", 28);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(75, \"div\", 21)(76, \"label\", 22)(77, \"span\", 23);\n            i0.ɵɵtext(78, \"Reference Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(79, \"input\", 29);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(80, \"label\", 22)(81, \"span\", 23);\n            i0.ɵɵtext(82, \"Reference ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(83, \"input\", 30);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(84, \"label\", 22)(85, \"span\", 23);\n            i0.ɵɵtext(86, \"Evidence (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(87, \"input\", 31);\n            i0.ɵɵlistener(\"change\", function PublicComplaintComponent_Template_input_change_87_listener($event) {\n              return ctx.onEvidenceSelected($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(88, \"button\", 32);\n            i0.ɵɵtext(89, \"Submit Complaint\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(90, PublicComplaintComponent_div_90_Template, 2, 1, \"div\", 33);\n            i0.ɵɵtemplate(91, PublicComplaintComponent_div_91_Template, 2, 1, \"div\", 34);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(53);\n            i0.ɵɵproperty(\"formGroup\", ctx.complaintForm);\n            i0.ɵɵadvance(37);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.success);\n          }\n        },\n        dependencies: [i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i4.RouterLink],\n        styles: [\".page[_ngcontent-%COMP%]{max-width:760px;margin:0 auto;padding:24px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 2px 8px #00000014}.form-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.help[_ngcontent-%COMP%]{color:#666;margin-bottom:16px}.error[_ngcontent-%COMP%]{color:#c0392b;margin-top:12px}.success[_ngcontent-%COMP%]{color:#2e7d32;margin-top:12px}\"]\n      });\n    }\n  }\n  return PublicComplaintComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}