{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let CountryListComponent = class CountryListComponent {\n  constructor(countryService, fb) {\n    this.countryService = countryService;\n    this.fb = fb;\n    this.countries = [];\n    this.regions = [];\n    this.recs = [];\n    this.editingId = null;\n    this.loading = false;\n    this.error = '';\n    this.form = this.fb.group({\n      isoCode: ['', [Validators.required, Validators.maxLength(3)]],\n      name: ['', Validators.required],\n      regionId: ['', Validators.required],\n      recIds: [[]],\n      continent: ['']\n    });\n  }\n  ngOnInit() {\n    this.load();\n    this.loadRegions();\n    this.loadRecs();\n  }\n  load() {\n    this.loading = true;\n    this.countryService.getCountries().subscribe({\n      next: data => {\n        this.countries = data || [];\n        this.loading = false;\n      },\n      error: () => {\n        this.error = 'Failed to load countries';\n        this.loading = false;\n      }\n    });\n  }\n  loadRegions() {\n    this.countryService.getRegions().subscribe({\n      next: data => this.regions = data || [],\n      error: () => this.regions = []\n    });\n  }\n  loadRecs() {\n    this.countryService.getRecs().subscribe({\n      next: data => this.recs = data || [],\n      error: () => this.recs = []\n    });\n  }\n  startEdit(country) {\n    this.editingId = country.id;\n    this.form.patchValue({\n      isoCode: country.isoCode,\n      name: country.name,\n      regionId: country.regionId,\n      continent: country.continent,\n      recIds: country.recIds || []\n    });\n  }\n  cancelEdit() {\n    this.editingId = null;\n    this.form.reset({\n      recIds: []\n    });\n  }\n  submit() {\n    if (this.form.invalid) return;\n    this.loading = true;\n    const payload = this.form.value;\n    const obs = this.editingId ? this.countryService.updateCountry(this.editingId, payload) : this.countryService.createCountry(payload);\n    obs.subscribe({\n      next: () => {\n        this.cancelEdit();\n        this.load();\n      },\n      error: () => {\n        this.error = 'Save failed';\n        this.loading = false;\n      }\n    });\n  }\n  delete(country) {\n    if (!confirm(`Delete country ${country.name}?`)) return;\n    this.countryService.deleteCountry(country.id).subscribe({\n      next: () => this.load(),\n      error: () => this.error = 'Delete failed'\n    });\n  }\n  trackById(_, item) {\n    return item.id;\n  }\n  getRegionName(regionId) {\n    return this.regions.find(r => r.id === regionId)?.name || '';\n  }\n  hasRec(country, recId) {\n    const recIds = country.recIds;\n    return Array.isArray(recIds) ? recIds.includes(recId) : false;\n  }\n};\nCountryListComponent = __decorate([Component({\n  selector: 'app-country-list',\n  templateUrl: './country-list.component.html',\n  styleUrls: ['./country-list.component.scss']\n})], CountryListComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}