{"ast":null,"code":"import { finalize } from 'rxjs';\nimport { RoleRequestStatus } from '../../shared/models/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../modules/auth/services/auth.service\";\nexport let RoleAdminComponent = /*#__PURE__*/(() => {\n  class RoleAdminComponent {\n    constructor(authService) {\n      this.authService = authService;\n      this.requests = [];\n      this.loading = false;\n      this.decidingId = null;\n      this.decisionError = '';\n      this.decisionSuccess = '';\n      this.decisionNotes = {};\n    }\n    ngOnInit() {\n      this.load();\n    }\n    load() {\n      this.loading = true;\n      this.authService.listRoleRequests().pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: reqs => {\n          this.requests = reqs || [];\n        },\n        error: err => {\n          this.requests = [];\n          this.decisionError = err?.error?.message || 'Failed to load requests.';\n        }\n      });\n    }\n    decide(req, status) {\n      this.decisionError = '';\n      this.decisionSuccess = '';\n      this.decidingId = req.id;\n      const payload = {\n        status,\n        note: this.decisionNotes[req.id]?.trim() || undefined\n      };\n      this.authService.decideRoleRequest(req.id, payload).pipe(finalize(() => {\n        this.decidingId = null;\n      })).subscribe({\n        next: res => {\n          this.requests = this.requests.map(r => r.id === res.id ? res : r);\n          this.decisionSuccess = `Request ${status.toLowerCase()}.`;\n        },\n        error: err => {\n          this.decisionError = err?.error?.message || 'Action failed.';\n        }\n      });\n    }\n    formatRole(role) {\n      return (role || '').toString().replace(/_/g, ' ') || 'N/A';\n    }\n    formatRolesList(roles) {\n      return roles && roles.length ? roles.map(r => this.formatRole(r)).join(', ') : 'None';\n    }\n    statusBadgeClasses(status) {\n      switch (status) {\n        case RoleRequestStatus.APPROVED:\n          return 'bg-emerald-50 text-emerald-700';\n        case RoleRequestStatus.REJECTED:\n          return 'bg-rose-50 text-rose-700';\n        default:\n          return 'bg-amber-50 text-amber-700';\n      }\n    }\n    static {\n      this.ɵfac = function RoleAdminComponent_Factory(t) {\n        return new (t || RoleAdminComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RoleAdminComponent,\n        selectors: [[\"app-role-admin\"]],\n        decls: 0,\n        vars: 0,\n        template: function RoleAdminComponent_Template(rf, ctx) {},\n        styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n      });\n    }\n  }\n  return RoleAdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}