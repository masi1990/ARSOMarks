{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/region.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction RegionListComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function RegionListComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.cancelEdit());\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegionListComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction RegionListComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function RegionListComponent_tr_34_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const region_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.startEdit(region_r5));\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function RegionListComponent_tr_34_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const region_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.delete(region_r5));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const region_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(region_r5.code);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(region_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(region_r5.description);\n  }\n}\nexport let RegionListComponent = /*#__PURE__*/(() => {\n  class RegionListComponent {\n    constructor(regionService, fb) {\n      this.regionService = regionService;\n      this.fb = fb;\n      this.regions = [];\n      this.editingId = null;\n      this.loading = false;\n      this.error = '';\n      this.form = this.fb.group({\n        code: ['', [Validators.required]],\n        name: ['', [Validators.required]],\n        description: ['']\n      });\n    }\n    ngOnInit() {\n      this.load();\n    }\n    load() {\n      this.loading = true;\n      this.regionService.list().subscribe({\n        next: data => {\n          this.regions = data || [];\n          this.loading = false;\n        },\n        error: () => {\n          this.error = 'Failed to load regions';\n          this.loading = false;\n        }\n      });\n    }\n    startEdit(region) {\n      this.editingId = region.id;\n      this.form.patchValue(region);\n    }\n    cancelEdit() {\n      this.editingId = null;\n      this.form.reset();\n    }\n    submit() {\n      if (this.form.invalid) return;\n      this.loading = true;\n      const payload = this.form.value;\n      const obs = this.editingId ? this.regionService.update(this.editingId, payload) : this.regionService.create(payload);\n      obs.subscribe({\n        next: () => {\n          this.cancelEdit();\n          this.load();\n        },\n        error: () => {\n          this.error = 'Save failed';\n          this.loading = false;\n        }\n      });\n    }\n    delete(region) {\n      if (!confirm(`Delete region ${region.name}?`)) return;\n      this.regionService.delete(region.id).subscribe({\n        next: () => this.load(),\n        error: () => this.error = 'Delete failed'\n      });\n    }\n    static {\n      this.ɵfac = function RegionListComponent_Factory(t) {\n        return new (t || RegionListComponent)(i0.ɵɵdirectiveInject(i1.RegionService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegionListComponent,\n        selectors: [[\"app-region-list\"]],\n        decls: 35,\n        vars: 6,\n        consts: [[1, \"page\"], [1, \"card\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [\"formControlName\", \"code\"], [\"formControlName\", \"name\"], [\"formControlName\", \"description\"], [1, \"actions\"], [\"type\", \"submit\", 3, \"disabled\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 3, \"click\"], [1, \"error\"], [3, \"click\"]],\n        template: function RegionListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Regions\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 1)(4, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function RegionListComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\");\n            i0.ɵɵtext(7, \"Code\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 3)(10, \"label\");\n            i0.ɵɵtext(11, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 3)(14, \"label\");\n            i0.ɵɵtext(15, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(16, \"textarea\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"div\", 7)(18, \"button\", 8);\n            i0.ɵɵtext(19);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(20, RegionListComponent_button_20_Template, 2, 0, \"button\", 9);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(21, RegionListComponent_div_21_Template, 2, 1, \"div\", 10);\n            i0.ɵɵelementStart(22, \"table\", 11)(23, \"thead\")(24, \"tr\")(25, \"th\");\n            i0.ɵɵtext(26, \"Code\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"th\");\n            i0.ɵɵtext(28, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"th\");\n            i0.ɵɵtext(30, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"th\");\n            i0.ɵɵtext(32, \"Actions\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(33, \"tbody\");\n            i0.ɵɵtemplate(34, RegionListComponent_tr_34_Template, 12, 3, \"tr\", 12);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"disabled\", ctx.loading || ctx.form.invalid);\n            i0.ɵɵadvance(1);\n            i0.ɵɵtextInterpolate(ctx.editingId ? \"Update\" : \"Create\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.editingId);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngForOf\", ctx.regions);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n        styles: [\".page[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;padding:10px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;padding:16px;margin-bottom:16px;border-radius:8px}.form[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:8px;border:1px solid #d0d0d0;border-radius:4px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;background:#2c3e50;color:#fff;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #e0e0e0}.error[_ngcontent-%COMP%]{color:#c0392b;margin-bottom:10px}\"]\n      });\n    }\n  }\n  return RegionListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}