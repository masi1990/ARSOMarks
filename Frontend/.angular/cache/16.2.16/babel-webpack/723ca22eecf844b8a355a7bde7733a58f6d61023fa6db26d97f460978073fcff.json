{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./traceability-public.service\";\nfunction TraceabilityDetailComponent_div_0_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r3.qrImage(ctx_r3.product.qrUrl), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction TraceabilityDetailComponent_div_0_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(s_r6);\n  }\n}\nfunction TraceabilityDetailComponent_div_0_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1, \"No standards listed.\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"/traceability/verify\"];\n};\nconst _c1 = function (a0) {\n  return {\n    token: a0\n  };\n};\nfunction TraceabilityDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\")(3, \"p\", 5);\n    i0.ɵɵtext(4, \"COC Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h1\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 7);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, TraceabilityDetailComponent_div_0_img_9_Template, 1, 1, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 9)(11, \"div\", 10)(12, \"h2\", 11);\n    i0.ɵɵtext(13, \"Certification\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 12);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 12);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 13);\n    i0.ɵɵtext(19, \"Verify status\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 10)(21, \"h2\", 11);\n    i0.ɵɵtext(22, \"Standards\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 14);\n    i0.ɵɵtemplate(24, TraceabilityDetailComponent_div_0_span_24_Template, 2, 1, \"span\", 15);\n    i0.ɵɵtemplate(25, TraceabilityDetailComponent_div_0_span_25_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.product.cocNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r0.product.productName, \" \\u2014 \", ctx_r0.product.brand, \" \\u2022 Origin: \", ctx_r0.product.originCountryName || ctx_r0.product.countryOfOrigin || \"N/A\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.product.qrUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Issue: \", ctx_r0.formatDate(ctx_r0.product.issueDate), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Expiry: \", ctx_r0.formatDate(ctx_r0.product.expiryDate), \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(11, _c0))(\"queryParams\", i0.ɵɵpureFunction1(12, _c1, ctx_r0.product.qrUrl));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.product.standards);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r0.product.standards == null ? null : ctx_r0.product.standards.length));\n  }\n}\nfunction TraceabilityDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"Loading product\\u2026\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TraceabilityDetailComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.error);\n  }\n}\nexport let TraceabilityDetailComponent = /*#__PURE__*/(() => {\n  class TraceabilityDetailComponent {\n    constructor(route, api) {\n      this.route = route;\n      this.api = api;\n      this.loading = false;\n      this.error = '';\n    }\n    ngOnInit() {\n      const id = this.route.snapshot.paramMap.get('id');\n      if (id) {\n        this.fetch(id);\n      }\n    }\n    fetch(id) {\n      this.loading = true;\n      this.api.getProductDetail(id).subscribe({\n        next: data => {\n          this.product = data;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err.error?.message || 'Unable to load product.';\n          this.loading = false;\n        }\n      });\n    }\n    qrImage(url) {\n      if (!url) return '';\n      return `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(url)}`;\n    }\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      return new Date(dateString).toLocaleDateString();\n    }\n    static {\n      this.ɵfac = function TraceabilityDetailComponent_Factory(t) {\n        return new (t || TraceabilityDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TraceabilityPublicService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TraceabilityDetailComponent,\n        selectors: [[\"app-traceability-detail\"]],\n        decls: 3,\n        vars: 3,\n        consts: [[\"class\", \"max-w-4xl mx-auto py-8 px-4\", 4, \"ngIf\"], [\"class\", \"max-w-4xl mx-auto p-6 text-center\", 4, \"ngIf\"], [\"class\", \"max-w-4xl mx-auto p-6 text-red-700 bg-red-50 border border-red-200 rounded-lg\", 4, \"ngIf\"], [1, \"max-w-4xl\", \"mx-auto\", \"py-8\", \"px-4\"], [1, \"flex\", \"flex-col\", \"md:flex-row\", \"md:items-center\", \"md:justify-between\", \"mb-6\"], [1, \"text-sm\", \"text-slate-500\"], [1, \"text-3xl\", \"font-bold\", \"text-slate-900\"], [1, \"text-slate-600\", \"mt-1\"], [\"alt\", \"QR code\", \"class\", \"mt-4 md:mt-0 border border-slate-200 rounded-lg p-2 w-40 h-40\", 3, \"src\", 4, \"ngIf\"], [1, \"grid\", \"gap-4\", \"md:grid-cols-2\"], [1, \"bg-white\", \"border\", \"border-slate-200\", \"rounded-lg\", \"p-4\"], [1, \"text-lg\", \"font-semibold\", \"text-slate-900\", \"mb-2\"], [1, \"text-sm\", \"text-slate-700\"], [1, \"text-sm\", \"text-blue-700\", \"font-semibold\", \"inline-block\", \"mt-2\", 3, \"routerLink\", \"queryParams\"], [1, \"flex\", \"flex-wrap\", \"gap-2\"], [\"class\", \"bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-sm text-slate-600\", 4, \"ngIf\"], [\"alt\", \"QR code\", 1, \"mt-4\", \"md:mt-0\", \"border\", \"border-slate-200\", \"rounded-lg\", \"p-2\", \"w-40\", \"h-40\", 3, \"src\"], [1, \"bg-blue-50\", \"text-blue-700\", \"text-xs\", \"px-2\", \"py-1\", \"rounded\"], [1, \"text-sm\", \"text-slate-600\"], [1, \"max-w-4xl\", \"mx-auto\", \"p-6\", \"text-center\"], [1, \"max-w-4xl\", \"mx-auto\", \"p-6\", \"text-red-700\", \"bg-red-50\", \"border\", \"border-red-200\", \"rounded-lg\"]],\n        template: function TraceabilityDetailComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, TraceabilityDetailComponent_div_0_Template, 26, 14, \"div\", 0);\n            i0.ɵɵtemplate(1, TraceabilityDetailComponent_div_1_Template, 2, 0, \"div\", 1);\n            i0.ɵɵtemplate(2, TraceabilityDetailComponent_div_2_Template, 2, 1, \"div\", 2);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.product);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n          }\n        },\n        styles: [\".qr[_ngcontent-%COMP%]{width:160px;height:160px}\"]\n      });\n    }\n  }\n  return TraceabilityDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}