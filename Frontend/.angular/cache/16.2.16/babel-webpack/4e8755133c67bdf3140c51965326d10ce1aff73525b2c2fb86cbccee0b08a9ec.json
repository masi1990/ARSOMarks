{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../modules/complaints/services/complaints.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nfunction PublicComplaintComponent_div_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction PublicComplaintComponent_div_83_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.success);\n  }\n}\nexport let PublicComplaintComponent = /*#__PURE__*/(() => {\n  class PublicComplaintComponent {\n    constructor(fb, complaintsService) {\n      this.fb = fb;\n      this.complaintsService = complaintsService;\n      this.error = '';\n      this.success = '';\n      this.selectedEvidenceFile = null;\n      this.complaintForm = this.fb.group({\n        complainantName: ['', Validators.required],\n        complainantEmail: ['', [Validators.required, Validators.email]],\n        complainantPhone: [''],\n        subject: ['', Validators.required],\n        description: ['', [Validators.required, Validators.minLength(10)]],\n        referenceType: [''],\n        referenceId: ['']\n      });\n    }\n    onEvidenceSelected(event) {\n      const input = event.target;\n      this.selectedEvidenceFile = input.files && input.files.length > 0 ? input.files[0] : null;\n    }\n    submitComplaint() {\n      this.error = '';\n      this.success = '';\n      if (this.complaintForm.invalid) {\n        this.error = 'Please complete the required fields';\n        return;\n      }\n      this.complaintsService.createComplaint(this.complaintForm.value).subscribe({\n        next: complaint => {\n          if (this.selectedEvidenceFile) {\n            this.complaintsService.uploadComplaintEvidence(complaint.id, this.selectedEvidenceFile).subscribe({\n              next: () => {\n                this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n                this.complaintForm.reset();\n                this.selectedEvidenceFile = null;\n              },\n              error: () => {\n                this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n                this.error = 'Complaint created but evidence upload failed';\n              }\n            });\n          } else {\n            this.success = `Complaint submitted: ${complaint.complaintNumber}`;\n            this.complaintForm.reset();\n          }\n        },\n        error: () => {\n          this.error = 'Failed to submit complaint';\n        }\n      });\n    }\n    static {\n      this.ɵfac = function PublicComplaintComponent_Factory(t) {\n        return new (t || PublicComplaintComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ComplaintsService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PublicComplaintComponent,\n        selectors: [[\"app-public-complaint\"]],\n        decls: 84,\n        vars: 3,\n        consts: [[1, \"min-h-screen\", \"bg-slate-50\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\", \"py-8\", \"lg:grid\", \"lg:grid-cols-[320px,1fr]\", \"lg:gap-6\"], [1, \"hidden\", \"lg:flex\", \"flex-col\", \"gap-4\", \"rounded-2xl\", \"border\", \"border-slate-200\", \"bg-white\", \"p-6\", \"shadow-sm\"], [1, \"text-xs\", \"font-semibold\", \"uppercase\", \"tracking-[0.14em]\", \"text-blue-600\"], [1, \"text-xl\", \"font-bold\", \"text-slate-900\", \"mt-1\"], [1, \"text-sm\", \"text-slate-600\", \"mt-1\"], [\"routerLink\", \"/\", 1, \"inline-flex\", \"items-center\", \"gap-2\", \"text-sm\", \"font-semibold\", \"text-slate-700\", \"hover:text-blue-700\"], [1, \"space-y-2\"], [\"routerLink\", \"/traceability\", 1, \"sidebar-link\"], [1, \"text-sm\", \"font-semibold\", \"text-slate-900\", \"group-hover:text-blue-700\"], [1, \"text-xs\", \"text-slate-600\"], [1, \"text-blue-500\"], [\"routerLink\", \"/complaints\", 1, \"sidebar-link\"], [\"routerLink\", \"/registry\", 1, \"sidebar-link\"], [1, \"space-y-6\"], [\"routerLink\", \"/\", 1, \"inline-flex\", \"lg:hidden\", \"items-center\", \"gap-2\", \"text-sm\", \"font-semibold\", \"text-slate-700\", \"hover:text-blue-700\"], [1, \"rounded-2xl\", \"bg-white\", \"border\", \"border-slate-200\", \"shadow-sm\", \"p-6\", \"space-y-3\"], [1, \"text-2xl\", \"font-bold\", \"text-slate-900\"], [1, \"text-sm\", \"text-slate-600\"], [1, \"space-y-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"grid\", \"gap-4\", \"md:grid-cols-2\"], [1, \"form-field\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"complainantName\", 1, \"form-input\"], [\"type\", \"email\", \"formControlName\", \"complainantEmail\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"complainantPhone\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"subject\", 1, \"form-input\"], [\"rows\", \"5\", \"formControlName\", \"description\", 1, \"form-textarea\"], [\"type\", \"text\", \"formControlName\", \"referenceType\", \"placeholder\", \"MARK_LICENSE, PRODUCT_CERT, etc.\", 1, \"form-input\"], [\"type\", \"text\", \"formControlName\", \"referenceId\", 1, \"form-input\"], [\"type\", \"file\", 1, \"form-input\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn-primary\", \"w-full\", \"md:w-auto\"], [\"class\", \"text-rose-700 bg-rose-50 border border-rose-200 rounded-lg px-3 py-2 text-sm\", 4, \"ngIf\"], [\"class\", \"text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2 text-sm\", 4, \"ngIf\"], [1, \"text-rose-700\", \"bg-rose-50\", \"border\", \"border-rose-200\", \"rounded-lg\", \"px-3\", \"py-2\", \"text-sm\"], [1, \"text-emerald-700\", \"bg-emerald-50\", \"border\", \"border-emerald-200\", \"rounded-lg\", \"px-3\", \"py-2\", \"text-sm\"]],\n        template: function PublicComplaintComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"aside\", 2)(3, \"div\")(4, \"p\", 3);\n            i0.ɵɵtext(5, \"Public tools\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"h2\", 4);\n            i0.ɵɵtext(7, \"Public Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"p\", 5);\n            i0.ɵɵtext(9, \"Verify products, submit complaints, or search certified items without logging in.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"button\", 6);\n            i0.ɵɵtext(11, \" \\u2190 Back to Dashboard \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 7)(13, \"a\", 8)(14, \"div\")(15, \"p\", 9);\n            i0.ɵɵtext(16, \"Traceability & Verification\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"p\", 10);\n            i0.ɵɵtext(18, \"Scan QR or paste token\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"span\", 11);\n            i0.ɵɵtext(20, \"\\u2192\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"a\", 12)(22, \"div\")(23, \"p\", 9);\n            i0.ɵɵtext(24, \"Public Complaints\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"p\", 10);\n            i0.ɵɵtext(26, \"Quality issues or mark misuse\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(27, \"span\", 11);\n            i0.ɵɵtext(28, \"\\u2192\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(29, \"a\", 13)(30, \"div\")(31, \"p\", 9);\n            i0.ɵɵtext(32, \"Certified Products Registry\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"p\", 10);\n            i0.ɵɵtext(34, \"Search by brand, standard, country\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(35, \"span\", 11);\n            i0.ɵɵtext(36, \"\\u2192\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(37, \"div\", 14)(38, \"button\", 15);\n            i0.ɵɵtext(39, \" \\u2190 Back to Dashboard \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"section\", 16)(41, \"h2\", 17);\n            i0.ɵɵtext(42, \"Submit a Complaint\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"p\", 18);\n            i0.ɵɵtext(44, \"Use this form to submit a complaint about marks, certifications, or services.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(45, \"form\", 19);\n            i0.ɵɵlistener(\"ngSubmit\", function PublicComplaintComponent_Template_form_ngSubmit_45_listener() {\n              return ctx.submitComplaint();\n            });\n            i0.ɵɵelementStart(46, \"div\", 20)(47, \"label\", 21)(48, \"span\", 22);\n            i0.ɵɵtext(49, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(50, \"input\", 23);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(51, \"label\", 21)(52, \"span\", 22);\n            i0.ɵɵtext(53, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(54, \"input\", 24);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(55, \"label\", 21)(56, \"span\", 22);\n            i0.ɵɵtext(57, \"Phone (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(58, \"input\", 25);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(59, \"label\", 21)(60, \"span\", 22);\n            i0.ɵɵtext(61, \"Subject\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(62, \"input\", 26);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(63, \"label\", 21)(64, \"span\", 22);\n            i0.ɵɵtext(65, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(66, \"textarea\", 27);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(67, \"div\", 20)(68, \"label\", 21)(69, \"span\", 22);\n            i0.ɵɵtext(70, \"Reference Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(71, \"input\", 28);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(72, \"label\", 21)(73, \"span\", 22);\n            i0.ɵɵtext(74, \"Reference ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(75, \"input\", 29);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(76, \"label\", 21)(77, \"span\", 22);\n            i0.ɵɵtext(78, \"Evidence (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(79, \"input\", 30);\n            i0.ɵɵlistener(\"change\", function PublicComplaintComponent_Template_input_change_79_listener($event) {\n              return ctx.onEvidenceSelected($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(80, \"button\", 31);\n            i0.ɵɵtext(81, \"Submit Complaint\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(82, PublicComplaintComponent_div_82_Template, 2, 1, \"div\", 32);\n            i0.ɵɵtemplate(83, PublicComplaintComponent_div_83_Template, 2, 1, \"div\", 33);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(45);\n            i0.ɵɵproperty(\"formGroup\", ctx.complaintForm);\n            i0.ɵɵadvance(37);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.success);\n          }\n        },\n        dependencies: [i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i4.RouterLink],\n        styles: [\".sidebar-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1));padding:.75rem 1rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.sidebar-link[_ngcontent-%COMP%]:hover{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:600;--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.form-input[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1));padding:.5rem .75rem;font-size:.875rem;line-height:1.25rem}.form-input[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1));outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(37 99 235 / var(--tw-ring-opacity, 1)) }.form-textarea[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1));padding:.5rem .75rem;font-size:.875rem;line-height:1.25rem}.form-textarea[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1));outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(37 99 235 / var(--tw-ring-opacity, 1)) }.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1));padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:600;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.btn-primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6}\"]\n      });\n    }\n  }\n  return PublicComplaintComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}