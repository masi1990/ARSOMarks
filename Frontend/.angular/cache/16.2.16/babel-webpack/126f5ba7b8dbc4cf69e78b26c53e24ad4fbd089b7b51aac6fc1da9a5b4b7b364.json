{"ast":null,"code":"import { UserRole } from '../../shared/models/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../modules/nsb-management/services/nsb.service\";\nimport * as i2 from \"../../modules/auth/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nexport let StakeholderRegistryListComponent = /*#__PURE__*/(() => {\n  class StakeholderRegistryListComponent {\n    constructor(nsbService, authService, router) {\n      this.nsbService = nsbService;\n      this.authService = authService;\n      this.router = router;\n      this.nsbs = [];\n      this.loading = false;\n      this.error = '';\n      this.filterStatus = 'ALL';\n    }\n    ngOnInit() {\n      this.loadRegistries();\n    }\n    loadRegistries() {\n      this.loading = true;\n      this.error = '';\n      const user = this.authService.currentUserValue;\n      const userRoles = user?.roles || (user?.role ? [user.role] : []);\n      const isSuperAdmin = userRoles.includes(UserRole.SUPER_ADMIN) || userRoles.includes(UserRole.ARSO_SECRETARIAT);\n      if (isSuperAdmin) {\n        // Super admins can see all NSBs\n        this.nsbService.getNsbList({\n          limit: 1000\n        }).subscribe({\n          next: response => {\n            this.nsbs = response.data || [];\n            this.loading = false;\n          },\n          error: () => {\n            this.error = 'Failed to load stakeholder registries.';\n            this.loading = false;\n          }\n        });\n      } else if (userRoles.includes(UserRole.NSB_ADMIN)) {\n        // NSB admins can only see their own NSB\n        this.nsbService.getMyNsb().subscribe({\n          next: nsb => {\n            this.nsbs = nsb ? [nsb] : [];\n            this.loading = false;\n          },\n          error: () => {\n            this.error = 'Failed to load your stakeholder registry.';\n            this.loading = false;\n          }\n        });\n      } else {\n        this.error = 'You do not have permission to view stakeholder registries.';\n        this.loading = false;\n      }\n    }\n    get filteredNsbs() {\n      if (this.filterStatus === 'ALL') {\n        return this.nsbs;\n      }\n      return this.nsbs.filter(nsb => nsb.stakeholderRegistryStatus === this.filterStatus);\n    }\n    getStatusBadgeClass(status) {\n      switch (status) {\n        case 'SUBMITTED':\n          return 'bg-emerald-100 text-emerald-800';\n        case 'DRAFT':\n          return 'bg-yellow-100 text-yellow-800';\n        default:\n          return 'bg-slate-100 text-slate-800';\n      }\n    }\n    getStatusLabel(status) {\n      switch (status) {\n        case 'SUBMITTED':\n          return 'Submitted';\n        case 'DRAFT':\n          return 'Draft';\n        default:\n          return 'Not Started';\n      }\n    }\n    viewRegistry(nsb) {\n      this.router.navigate(['/nsb/stakeholder-registry'], {\n        queryParams: {\n          nsbId: nsb.id\n        }\n      });\n    }\n    formatDate(dateString) {\n      if (!dateString) return '-';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n    static {\n      this.ɵfac = function StakeholderRegistryListComponent_Factory(t) {\n        return new (t || StakeholderRegistryListComponent)(i0.ɵɵdirectiveInject(i1.NsbService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: StakeholderRegistryListComponent,\n        selectors: [[\"app-stakeholder-registry-list\"]],\n        decls: 0,\n        vars: 0,\n        template: function StakeholderRegistryListComponent_Template(rf, ctx) {},\n        styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n      });\n    }\n  }\n  return StakeholderRegistryListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}