{"ast":null,"code":"import { finalize } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../modules/mark-licensing/services/mark-license-dashboard.service\";\nimport * as i2 from \"../../modules/mark-licensing/services/mark-license-application.service\";\nimport * as i3 from \"../../modules/mark-licensing/services/mark-license-agreement.service\";\nimport * as i4 from \"../../modules/mark-licensing/services/mark-usage-report.service\";\nimport * as i5 from \"../../modules/nsb-management/services/nsb.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/common\";\nfunction MarkLicenseDashboardComponent_div_18_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1, \"No pending applications found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"table\", 13)(2, \"thead\", 14)(3, \"tr\")(4, \"th\", 15);\n    i0.ɵɵtext(5, \"Application ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 15);\n    i0.ɵɵtext(7, \"Date Submitted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 15);\n    i0.ɵɵtext(9, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 15);\n    i0.ɵɵtext(11, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 16);\n    i0.ɵɵtext(13, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\", 17)(15, \"tr\")(16, \"td\", 18);\n    i0.ɵɵtext(17, \"APP-2023-884\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\", 19);\n    i0.ɵɵtext(19, \"Oct 24, 2023\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"td\", 19);\n    i0.ɵɵtext(21, \"Certification Body\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\", 20)(23, \"span\", 21);\n    i0.ɵɵtext(24, \"In Review\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"td\", 22)(26, \"a\", 23);\n    i0.ɵɵtext(27, \"View\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵtemplate(28, MarkLicenseDashboardComponent_div_18_div_28_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(28);\n    i0.ɵɵproperty(\"ngIf\", false);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 26)(2, \"h3\", 27);\n    i0.ɵɵtext(3, \"Active Licenses\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵtext(5, \"2 Active\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"table\", 13)(7, \"thead\", 14)(8, \"tr\")(9, \"th\", 15);\n    i0.ɵɵtext(10, \"License No.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 15);\n    i0.ɵɵtext(12, \"Valid From\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 15);\n    i0.ɵɵtext(14, \"Valid To\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\", 15);\n    i0.ɵɵtext(16, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\", 16);\n    i0.ɵɵtext(18, \"Download\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\", 17)(20, \"tr\")(21, \"td\", 29);\n    i0.ɵɵtext(22, \"LIC-KE-2023-001\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"td\", 19);\n    i0.ɵɵtext(24, \"Jan 01, 2023\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\", 19);\n    i0.ɵɵtext(26, \"Dec 31, 2025\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"td\", 19);\n    i0.ɵɵtext(28, \"Certification Body\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"td\", 22)(30, \"button\", 30);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(31, \"svg\", 31);\n    i0.ɵɵelement(32, \"path\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \" PDF \");\n    i0.ɵɵelementEnd()()()()()();\n  }\n}\nexport let MarkLicenseDashboardComponent = /*#__PURE__*/(() => {\n  class MarkLicenseDashboardComponent {\n    constructor(dashboardService, applicationService, agreementService, reportService, nsbService, router) {\n      this.dashboardService = dashboardService;\n      this.applicationService = applicationService;\n      this.agreementService = agreementService;\n      this.reportService = reportService;\n      this.nsbService = nsbService;\n      this.router = router;\n      this.loading = false;\n      this.error = '';\n      this.nsb = null;\n      this.nsbId = null;\n      // Dashboard data\n      this.overview = null;\n      this.analytics = null;\n      this.calendar = null;\n      // Selected view\n      this.activeView = 'overview';\n    }\n    ngOnInit() {\n      this.loadNsb();\n    }\n    loadNsb() {\n      this.loading = true;\n      this.nsbService.getMyNsb().pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: nsb => {\n          this.nsb = nsb;\n          this.nsbId = nsb.id;\n          this.loadDashboardData();\n        },\n        error: () => {\n          this.error = 'Failed to load NSB information. Please ensure you have an NSB profile.';\n        }\n      });\n    }\n    loadDashboardData() {\n      if (!this.nsbId) return;\n      this.loading = true;\n      this.error = '';\n      // Load all dashboard data in parallel\n      Promise.all([this.dashboardService.getOverview(this.nsbId).toPromise(), this.dashboardService.getAnalytics(this.nsbId).toPromise(), this.dashboardService.getCalendar(this.nsbId).toPromise()]).then(([overview, analytics, calendar]) => {\n        this.overview = overview || null;\n        this.analytics = analytics || null;\n        this.calendar = calendar || null;\n        this.loading = false;\n      }).catch(err => {\n        this.error = err.error?.message || 'Failed to load dashboard data.';\n        this.loading = false;\n      });\n    }\n    setActiveView(view) {\n      this.activeView = view;\n    }\n    // Navigation helpers\n    viewApplication(id) {\n      this.router.navigate(['/portal/mark-licenses/apply'], {\n        queryParams: {\n          id\n        }\n      });\n    }\n    viewAgreement(id) {\n      this.router.navigate(['/portal/mark-licenses/agreements', id]);\n    }\n    createApplication() {\n      this.router.navigate(['/portal/mark-licenses/apply']);\n    }\n    createReport(licenseId) {\n      this.router.navigate(['/portal/mark-licenses/reports/new', licenseId]);\n    }\n    requestModification(licenseId) {\n      this.router.navigate(['/portal/mark-licenses/modifications/new', licenseId]);\n    }\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n    getStatusBadgeClass(status) {\n      switch (status) {\n        case 'ACTIVE':\n        case 'EXECUTED':\n          return 'bg-emerald-100 text-emerald-800';\n        case 'DRAFT':\n          return 'bg-slate-100 text-slate-800';\n        case 'SUBMITTED':\n        case 'UNDER_REVIEW':\n          return 'bg-blue-100 text-blue-800';\n        case 'EXPIRED':\n          return 'bg-red-100 text-red-800';\n        case 'REJECTED':\n          return 'bg-red-100 text-red-800';\n        default:\n          return 'bg-gray-100 text-gray-800';\n      }\n    }\n    getUrgencyClass(days) {\n      if (days <= 7) return 'text-red-600 font-bold';\n      if (days <= 30) return 'text-amber-600 font-semibold';\n      return 'text-slate-600';\n    }\n    calculateDaysUntil(dateString) {\n      if (!dateString) return 0;\n      const date = new Date(dateString);\n      const today = new Date();\n      const diffTime = date.getTime() - today.getTime();\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    }\n    getMaxMediaValue() {\n      if (!this.analytics?.mediaTypeBreakdown) return 1;\n      return Math.max(...Object.values(this.analytics.mediaTypeBreakdown));\n    }\n    static {\n      this.ɵfac = function MarkLicenseDashboardComponent_Factory(t) {\n        return new (t || MarkLicenseDashboardComponent)(i0.ɵɵdirectiveInject(i1.MarkLicenseDashboardService), i0.ɵɵdirectiveInject(i2.MarkLicenseApplicationService), i0.ɵɵdirectiveInject(i3.MarkLicenseAgreementService), i0.ɵɵdirectiveInject(i4.MarkUsageReportService), i0.ɵɵdirectiveInject(i5.NsbService), i0.ɵɵdirectiveInject(i6.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MarkLicenseDashboardComponent,\n        selectors: [[\"app-mark-license-dashboard\"]],\n        decls: 20,\n        vars: 19,\n        consts: [[1, \"p-6\", \"bg-gray-50\", \"min-h-screen\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-6\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-800\"], [1, \"text-gray-500\"], [\"routerLink\", \"/portal/mark-licenses/apply\", 1, \"bg-blue-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded-md\", \"hover:bg-blue-700\", \"transition\", \"flex\", \"items-center\", \"gap-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 20 20\", \"fill\", \"currentColor\", 1, \"h-5\", \"w-5\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\", \"clip-rule\", \"evenodd\"], [1, \"border-b\", \"border-gray-200\", \"mb-6\"], [\"aria-label\", \"Tabs\", 1, \"-mb-px\", \"flex\", \"space-x-8\"], [1, \"whitespace-nowrap\", \"py-4\", \"px-1\", \"border-b-2\", \"font-medium\", \"text-sm\", \"transition-colors\", \"hover:text-gray-700\", \"hover:border-gray-300\", 3, \"click\"], [3, \"ngSwitch\"], [\"class\", \"bg-white rounded-lg shadow overflow-hidden\", 4, \"ngSwitchCase\"], [1, \"bg-white\", \"rounded-lg\", \"shadow\", \"overflow-hidden\"], [1, \"min-w-full\", \"divide-y\", \"divide-gray-200\"], [1, \"bg-gray-50\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\", \"text-left\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"uppercase\", \"tracking-wider\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\", \"text-right\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"uppercase\", \"tracking-wider\"], [1, \"bg-white\", \"divide-y\", \"divide-gray-200\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-sm\", \"font-medium\", \"text-blue-600\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-sm\", \"text-gray-500\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\"], [1, \"px-2\", \"inline-flex\", \"text-xs\", \"leading-5\", \"font-semibold\", \"rounded-full\", \"bg-yellow-100\", \"text-yellow-800\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-right\", \"text-sm\", \"font-medium\"], [\"href\", \"#\", 1, \"text-blue-600\", \"hover:text-blue-900\"], [\"class\", \"p-4 text-center text-gray-500 text-sm\", 4, \"ngIf\"], [1, \"p-4\", \"text-center\", \"text-gray-500\", \"text-sm\"], [1, \"p-4\", \"border-b\", \"border-gray-200\", \"flex\", \"justify-between\", \"items-center\", \"bg-green-50\"], [1, \"text-lg\", \"font-medium\", \"text-green-800\"], [1, \"bg-green-200\", \"text-green-800\", \"text-xs\", \"px-2\", \"py-1\", \"rounded-full\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-sm\", \"font-medium\", \"text-gray-900\"], [1, \"text-blue-600\", \"hover:text-blue-900\", \"flex\", \"items-center\", \"justify-end\", \"w-full\", \"gap-1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-4\", \"w-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"]],\n        template: function MarkLicenseDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n            i0.ɵɵtext(4, \"Mark License Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"p\", 3);\n            i0.ɵɵtext(6, \"Manage your licenses and applications\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"button\", 4);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(8, \"svg\", 5);\n            i0.ɵɵelement(9, \"path\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(10, \" New Application \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(11, \"div\", 7)(12, \"nav\", 8)(13, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_Template_button_click_13_listener() {\n              return ctx.activeTab = \"applications\";\n            });\n            i0.ɵɵtext(14, \" My Applications \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_Template_button_click_15_listener() {\n              return ctx.activeTab = \"approved\";\n            });\n            i0.ɵɵtext(16, \" Approved License Registrations \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 10);\n            i0.ɵɵtemplate(18, MarkLicenseDashboardComponent_div_18_Template, 29, 1, \"div\", 11);\n            i0.ɵɵtemplate(19, MarkLicenseDashboardComponent_div_19_Template, 34, 0, \"div\", 11);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(13);\n            i0.ɵɵclassProp(\"border-blue-500\", ctx.activeTab === \"applications\")(\"text-blue-600\", ctx.activeTab === \"applications\")(\"border-transparent\", ctx.activeTab !== \"applications\")(\"text-gray-500\", ctx.activeTab !== \"applications\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"border-blue-500\", ctx.activeTab === \"approved\")(\"text-blue-600\", ctx.activeTab === \"approved\")(\"border-transparent\", ctx.activeTab !== \"approved\")(\"text-gray-500\", ctx.activeTab !== \"approved\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngSwitch\", ctx.activeTab);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngSwitchCase\", \"applications\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngSwitchCase\", \"approved\");\n          }\n        },\n        dependencies: [i7.NgIf, i7.NgSwitch, i7.NgSwitchCase, i6.RouterLink],\n        styles: [\"[_nghost-%COMP%]{display:block;width:100%}.dashboard-widget[_ngcontent-%COMP%]{transition:all .2s ease}.dashboard-widget[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a}.tab-nav[_ngcontent-%COMP%]{border-bottom:2px solid #e2e8f0}.tab-button[_ngcontent-%COMP%]{transition:all .2s ease}.tab-button.active[_ngcontent-%COMP%]{border-bottom-color:#2563eb;color:#2563eb}.tab-button[_ngcontent-%COMP%]:hover{color:#1e293b}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#ffffff,#f8fafc);transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.progress-bar[_ngcontent-%COMP%]{transition:width .3s ease}.deadline-item[_ngcontent-%COMP%]{transition:all .2s ease}.deadline-item[_ngcontent-%COMP%]:hover{transform:translate(4px)}@media (max-width: 768px){.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}\"]\n      });\n    }\n  }\n  return MarkLicenseDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}