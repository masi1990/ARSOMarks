{"ast":null,"code":"import { finalize } from 'rxjs';\nimport { MarkLicenseStatus } from 'src/app/shared/models/mark-license.model';\nimport { UserRole } from 'src/app/shared/models/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/modules/mark-licensing/services/mark-license-application.service\";\nimport * as i2 from \"src/app/modules/nsb-management/services/nsb.service\";\nimport * as i3 from \"src/app/modules/auth/services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nfunction MarkLicenseDashboardComponent_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.activeTab = \"approvals\");\n    });\n    i0.ɵɵtext(1, \" Approval Requests \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"border-blue-500\", ctx_r0.activeTab === \"approvals\")(\"text-blue-600\", ctx_r0.activeTab === \"approvals\")(\"border-transparent\", ctx_r0.activeTab !== \"approvals\")(\"text-gray-500\", ctx_r0.activeTab !== \"approvals\");\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"Loading applications...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.error);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Approving...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Approve\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Rejecting...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Reject\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const application_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r18.approveApplication(application_r12.id));\n    });\n    i0.ɵɵtemplate(2, MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_2_Template, 2, 0, \"span\", 36);\n    i0.ɵɵtemplate(3, MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_3_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const application_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r21.rejectApplication(application_r12.id));\n    });\n    i0.ɵɵtemplate(5, MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_5_Template, 2, 0, \"span\", 36);\n    i0.ɵɵtemplate(6, MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_span_6_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const application_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r13.processingId === application_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r13.processingId === application_r12.id && ctx_r13.processingAction === \"approve\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r13.processingId !== application_r12.id || ctx_r13.processingAction !== \"approve\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r13.processingId === application_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r13.processingId === application_r12.id && ctx_r13.processingAction === \"reject\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r13.processingId !== application_r12.id || ctx_r13.processingAction !== \"reject\");\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 27)(2, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_19_table_3_tr_16_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const application_r12 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r24.viewApplication(application_r12.id));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 29);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 30);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 31)(11, \"span\", 32);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\", 33)(14, \"div\", 34)(15, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_19_table_3_tr_16_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const application_r12 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r26.viewApplication(application_r12.id));\n    });\n    i0.ɵɵtext(16, \"View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, MarkLicenseDashboardComponent_div_19_table_3_tr_16_ng_container_17_Template, 7, 6, \"ng-container\", 36);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const application_r12 = ctx.$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", application_r12.id, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r12.applicationNumber || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r12.submittedAt || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r12.type || \"\\u2014\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", application_r12.status || \"\\u2014\", \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.isAdminUser && (application_r12.status === \"SUBMITTED\" || application_r12.status === \"UNDER_REVIEW\"));\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 21)(1, \"thead\", 22)(2, \"tr\")(3, \"th\", 23);\n    i0.ɵɵtext(4, \"Application ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 23);\n    i0.ɵɵtext(6, \"Reference\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 23);\n    i0.ɵɵtext(8, \"Date Submitted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 23);\n    i0.ɵɵtext(10, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 23);\n    i0.ɵɵtext(12, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 24);\n    i0.ɵɵtext(14, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\", 25);\n    i0.ɵɵtemplate(16, MarkLicenseDashboardComponent_div_19_table_3_tr_16_Template, 18, 6, \"tr\", 26);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.applications);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \"No applications found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, MarkLicenseDashboardComponent_div_19_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(2, MarkLicenseDashboardComponent_div_19_div_2_Template, 2, 1, \"div\", 16);\n    i0.ɵɵtemplate(3, MarkLicenseDashboardComponent_div_19_table_3_Template, 17, 1, \"table\", 17);\n    i0.ɵɵtemplate(4, MarkLicenseDashboardComponent_div_19_div_4_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading && ctx_r1.error);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading && ctx_r1.applications.length === 0);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"You do not have access to approval requests.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"Loading approval requests...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r30.error);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Approving...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Approve\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Rejecting...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Reject\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 27)(2, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const application_r34 = restoredCtx.$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r39.viewApplication(application_r34.id));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 29);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 30);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 31)(11, \"span\", 32);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\", 33)(14, \"div\", 34)(15, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const application_r34 = restoredCtx.$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r41.viewApplication(application_r34.id));\n    });\n    i0.ɵɵtext(16, \"View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const application_r34 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r42.approveApplication(application_r34.id));\n    });\n    i0.ɵɵtemplate(18, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_18_Template, 2, 0, \"span\", 36);\n    i0.ɵɵtemplate(19, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_19_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template_button_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const application_r34 = restoredCtx.$implicit;\n      const ctx_r43 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r43.rejectApplication(application_r34.id));\n    });\n    i0.ɵɵtemplate(21, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_21_Template, 2, 0, \"span\", 36);\n    i0.ɵɵtemplate(22, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_span_22_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const application_r34 = ctx.$implicit;\n    const ctx_r33 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", application_r34.id, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r34.applicationNumber || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r34.submittedAt || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(application_r34.type || \"\\u2014\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", application_r34.status || \"\\u2014\", \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r33.processingId === application_r34.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.processingId === application_r34.id && ctx_r33.processingAction === \"approve\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.processingId !== application_r34.id || ctx_r33.processingAction !== \"approve\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r33.processingId === application_r34.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.processingId === application_r34.id && ctx_r33.processingAction === \"reject\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.processingId !== application_r34.id || ctx_r33.processingAction !== \"reject\");\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 21)(1, \"thead\", 22)(2, \"tr\")(3, \"th\", 23);\n    i0.ɵɵtext(4, \"Application ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 23);\n    i0.ɵɵtext(6, \"Reference\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 23);\n    i0.ɵɵtext(8, \"Date Submitted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 23);\n    i0.ɵɵtext(10, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 23);\n    i0.ɵɵtext(12, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 24);\n    i0.ɵɵtext(14, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\", 25);\n    i0.ɵɵtemplate(16, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_tr_16_Template, 23, 11, \"tr\", 26);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r31.approvalRequests);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \"No approval requests found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MarkLicenseDashboardComponent_div_20_ng_container_2_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(2, MarkLicenseDashboardComponent_div_20_ng_container_2_div_2_Template, 2, 1, \"div\", 16);\n    i0.ɵɵtemplate(3, MarkLicenseDashboardComponent_div_20_ng_container_2_table_3_Template, 17, 1, \"table\", 17);\n    i0.ɵɵtemplate(4, MarkLicenseDashboardComponent_div_20_ng_container_2_div_4_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r28 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r28.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r28.loading && ctx_r28.error);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r28.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r28.loading && ctx_r28.approvalRequests.length === 0);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, MarkLicenseDashboardComponent_div_20_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(2, MarkLicenseDashboardComponent_div_20_ng_container_2_Template, 5, 4, \"ng-container\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isAdminUser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isAdminUser);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_21_tr_20_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 46);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 47);\n    i0.ɵɵelement(2, \"path\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" PDF \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const license_r46 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"href\", license_r46.downloadUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_21_tr_20_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 49);\n    i0.ɵɵtext(1, \"\\u2014\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_21_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 43);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 29);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 29);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 30);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 33);\n    i0.ɵɵtemplate(10, MarkLicenseDashboardComponent_div_21_tr_20_a_10_Template, 4, 1, \"a\", 44);\n    i0.ɵɵtemplate(11, MarkLicenseDashboardComponent_div_21_tr_20_span_11_Template, 2, 0, \"span\", 45);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const license_r46 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(license_r46.licenseNo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(license_r46.validFrom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(license_r46.validTo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(license_r46.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", license_r46.downloadUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !license_r46.downloadUrl);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_21_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \"No approved licenses found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 40)(2, \"h3\", 41);\n    i0.ɵɵtext(3, \"Active Licenses\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 42);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"table\", 21)(7, \"thead\", 22)(8, \"tr\")(9, \"th\", 23);\n    i0.ɵɵtext(10, \"License No.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 23);\n    i0.ɵɵtext(12, \"Valid From\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 23);\n    i0.ɵɵtext(14, \"Valid To\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\", 23);\n    i0.ɵɵtext(16, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\", 24);\n    i0.ɵɵtext(18, \"Download\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\", 25);\n    i0.ɵɵtemplate(20, MarkLicenseDashboardComponent_div_21_tr_20_Template, 12, 6, \"tr\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(21, MarkLicenseDashboardComponent_div_21_div_21_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.approvedLicenses.length, \" Active\");\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.approvedLicenses);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.approvedLicenses.length === 0);\n  }\n}\nfunction MarkLicenseDashboardComponent_div_22_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59)(1, \"p\", 60);\n    i0.ɵɵtext(2, \"Loading application details...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_22_div_11_li_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const doc_r55 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", doc_r55.documentType, \": \", doc_r55.fileName, \"\");\n  }\n}\nfunction MarkLicenseDashboardComponent_div_22_div_11_li_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"\\u2014\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [];\n};\nfunction MarkLicenseDashboardComponent_div_22_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61)(1, \"div\", 62)(2, \"div\")(3, \"span\", 3);\n    i0.ɵɵtext(4, \"Application #:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 63);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"span\", 3);\n    i0.ɵɵtext(9, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 63);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\")(13, \"span\", 3);\n    i0.ɵɵtext(14, \"NSB:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 63);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\")(18, \"span\", 3);\n    i0.ɵɵtext(19, \"Submitted On:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\", 63);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 64)(23, \"h4\", 65);\n    i0.ɵɵtext(24, \"License Types\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"p\", 66);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 64)(28, \"h4\", 65);\n    i0.ɵɵtext(29, \"Marks Requested\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"p\", 66);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 64)(33, \"h4\", 65);\n    i0.ɵɵtext(34, \"ACAP Schemes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"p\", 66);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(37, \"div\", 64)(38, \"h4\", 65);\n    i0.ɵɵtext(39, \"Eco Mark Requirements\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"p\", 66);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(42, \"div\", 64)(43, \"h4\", 65);\n    i0.ɵɵtext(44, \"Supporting Documents\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"ul\", 67);\n    i0.ɵɵtemplate(46, MarkLicenseDashboardComponent_div_22_div_11_li_46_Template, 2, 2, \"li\", 26);\n    i0.ɵɵtemplate(47, MarkLicenseDashboardComponent_div_22_div_11_li_47_Template, 2, 0, \"li\", 36);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(48, \"div\", 64)(49, \"h4\", 65);\n    i0.ɵɵtext(50, \"Submitted By\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"p\", 66);\n    i0.ɵɵtext(52);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r51 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r51.selectedApplication.applicationNumber);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r51.selectedApplication.status);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r51.selectedApplication.nsbApplicantName);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r51.selectedApplication.submittedAt || ctx_r51.selectedApplication.createdAt);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate((ctx_r51.selectedApplication.licenseTypes == null ? null : ctx_r51.selectedApplication.licenseTypes.join(\", \")) || \"\\u2014\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate((ctx_r51.selectedApplication.marksRequested == null ? null : ctx_r51.selectedApplication.marksRequested.join(\", \")) || \"\\u2014\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate((ctx_r51.selectedApplication.markLanguages == null ? null : ctx_r51.selectedApplication.markLanguages.join(\", \")) || \"\\u2014\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate((ctx_r51.selectedApplication.markColorsNeeded == null ? null : ctx_r51.selectedApplication.markColorsNeeded.join(\", \")) || \"\\u2014\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r51.selectedApplication.supportingDocuments || i0.ɵɵpureFunction0(12, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r51.selectedApplication.supportingDocuments == null ? null : ctx_r51.selectedApplication.supportingDocuments.length));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r51.selectedApplication.declarationSignatory, \" \\u2022 \", ctx_r51.selectedApplication.signatoryEmail, \"\");\n  }\n}\nfunction MarkLicenseDashboardComponent_div_22_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r57 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"button\", 69);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_22_div_12_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r57);\n      const ctx_r56 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r56.closeApplicationModal());\n    });\n    i0.ɵɵtext(2, \"Close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 70);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_22_div_12_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r57);\n      const ctx_r58 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r58.downloadCertificate(ctx_r58.selectedApplication));\n    });\n    i0.ɵɵtext(4, \" Download Certificate (Template) \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MarkLicenseDashboardComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r60 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"div\", 51)(2, \"div\", 52)(3, \"div\")(4, \"h3\", 53);\n    i0.ɵɵtext(5, \"Application Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 54);\n    i0.ɵɵtext(7, \"View-only mode\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_div_22_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r60);\n      const ctx_r59 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r59.closeApplicationModal());\n    });\n    i0.ɵɵtext(9, \"\\u2715\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(10, MarkLicenseDashboardComponent_div_22_div_10_Template, 3, 0, \"div\", 56);\n    i0.ɵɵtemplate(11, MarkLicenseDashboardComponent_div_22_div_11_Template, 53, 13, \"div\", 57);\n    i0.ɵɵtemplate(12, MarkLicenseDashboardComponent_div_22_div_12_Template, 5, 0, \"div\", 58);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.viewLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.viewLoading && ctx_r4.selectedApplication);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.viewLoading && ctx_r4.selectedApplication);\n  }\n}\nexport let MarkLicenseDashboardComponent = /*#__PURE__*/(() => {\n  class MarkLicenseDashboardComponent {\n    constructor(licenseService, nsbService, authService) {\n      this.licenseService = licenseService;\n      this.nsbService = nsbService;\n      this.authService = authService;\n      this.activeTab = 'applications';\n      this.loading = false;\n      this.error = '';\n      this.nsbId = null;\n      this.isAdminUser = false;\n      this.processingId = null;\n      this.processingAction = null;\n      this.selectedApplication = null;\n      this.viewLoading = false;\n      this.viewError = '';\n      this.applications = [];\n      this.approvedLicenses = [];\n    }\n    ngOnInit() {\n      const user = this.authService.currentUserValue;\n      const roles = user?.roles || (user?.role ? [user.role] : []);\n      this.isAdminUser = roles.includes(UserRole.SUPER_ADMIN) || roles.includes(UserRole.ARSO_SECRETARIAT);\n      this.loadApplications();\n    }\n    loadApplications() {\n      this.loading = true;\n      this.error = '';\n      if (this.isAdminUser) {\n        this.fetchAllApplications();\n        return;\n      }\n      this.nsbService.getMyNsb().pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: nsb => {\n          this.nsbId = nsb?.id || null;\n          if (!this.nsbId) {\n            this.applications = [];\n            return;\n          }\n          this.fetchApplications(this.nsbId);\n        },\n        error: () => {\n          this.loading = false;\n          this.error = 'Unable to load NSB details.';\n          this.applications = [];\n        }\n      });\n    }\n    fetchApplications(nsbId) {\n      this.loading = true;\n      this.licenseService.getApplicationsByNsb(nsbId, true).pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: applications => {\n          const filtered = (applications || []).filter(app => app.status !== MarkLicenseStatus.DRAFT);\n          this.applications = filtered.map(app => this.mapApplication(app));\n        },\n        error: () => {\n          this.error = 'Unable to load applications.';\n          this.applications = [];\n        }\n      });\n    }\n    fetchAllApplications() {\n      this.loading = true;\n      this.licenseService.getAllApplications(true).pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: applications => {\n          const filtered = (applications || []).filter(app => app.status !== MarkLicenseStatus.DRAFT);\n          this.applications = filtered.map(app => this.mapApplication(app));\n        },\n        error: () => {\n          this.error = 'Unable to load applications.';\n          this.applications = [];\n        }\n      });\n    }\n    mapApplication(app) {\n      return {\n        id: app.id,\n        applicationNumber: app.applicationNumber,\n        submittedAt: app.submittedAt ? new Date(app.submittedAt).toLocaleDateString() : undefined,\n        type: app.licenseTypes?.length ? app.licenseTypes.join(', ') : undefined,\n        status: app.status\n      };\n    }\n    get approvalRequests() {\n      return this.applications.filter(application => application.status === MarkLicenseStatus.SUBMITTED || application.status === MarkLicenseStatus.UNDER_REVIEW);\n    }\n    approveApplication(applicationId) {\n      if (!applicationId || this.processingId) {\n        return;\n      }\n      this.processingId = applicationId;\n      this.processingAction = 'approve';\n      this.licenseService.approveApplication(applicationId).pipe(finalize(() => {\n        this.processingId = null;\n        this.processingAction = null;\n      })).subscribe({\n        next: application => {\n          this.applications = this.applications.map(item => item.id === applicationId ? {\n            ...item,\n            status: application.status\n          } : item);\n        },\n        error: () => {\n          this.error = 'Unable to approve application.';\n        }\n      });\n    }\n    rejectApplication(applicationId) {\n      if (!applicationId || this.processingId) {\n        return;\n      }\n      const reason = window.prompt('Reason for rejection (optional):', '') || undefined;\n      this.processingId = applicationId;\n      this.processingAction = 'reject';\n      this.licenseService.rejectApplication(applicationId, reason).pipe(finalize(() => {\n        this.processingId = null;\n        this.processingAction = null;\n      })).subscribe({\n        next: application => {\n          this.applications = this.applications.map(item => item.id === applicationId ? {\n            ...item,\n            status: application.status\n          } : item);\n        },\n        error: () => {\n          this.error = 'Unable to reject application.';\n        }\n      });\n    }\n    viewApplication(applicationId) {\n      if (!applicationId) {\n        return;\n      }\n      this.viewLoading = true;\n      this.viewError = '';\n      this.selectedApplication = null;\n      this.licenseService.getApplicationById(applicationId).pipe(finalize(() => {\n        this.viewLoading = false;\n      })).subscribe({\n        next: application => {\n          this.selectedApplication = application;\n        },\n        error: () => {\n          this.viewError = 'Unable to load application details.';\n        }\n      });\n    }\n    closeApplicationModal() {\n      this.selectedApplication = null;\n      this.viewError = '';\n      this.viewLoading = false;\n    }\n    downloadCertificate(application) {\n      const html = this.buildCertificateHtml(application);\n      const win = window.open('', '_blank');\n      if (!win) {\n        return;\n      }\n      win.document.open();\n      win.document.write(html);\n      win.document.close();\n      setTimeout(() => {\n        win.focus();\n        win.print();\n      }, 300);\n    }\n    buildCertificateHtml(application) {\n      const submittedAt = application.submittedAt || application.createdAt;\n      const submittedLabel = submittedAt ? new Date(submittedAt).toLocaleString() : 'N/A';\n      const validFrom = application.approvedAt || submittedAt || application.createdAt;\n      const validFromLabel = validFrom ? new Date(validFrom).toLocaleDateString() : 'N/A';\n      const validToLabel = this.getValidityEndLabel(validFrom, application.licenseDuration);\n      const marks = (application.marksRequested || []).join(', ') || 'N/A';\n      const schemes = (application.markLanguages || []).join(', ') || 'N/A';\n      const requirements = (application.markColorsNeeded || []).join(', ') || 'N/A';\n      return `\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Mark License Certificate</title>\n    <style>\n      @page { size: landscape; margin: 24mm; }\n      body { font-family: Arial, sans-serif; color: #111827; }\n      .page { border: 2px solid #111827; padding: 24px; }\n      .header { text-align: center; margin-bottom: 24px; }\n      .title { font-size: 28px; font-weight: bold; letter-spacing: 2px; }\n      .subtitle { font-size: 14px; margin-top: 6px; color: #374151; }\n      .section { margin-top: 18px; }\n      .section h3 { font-size: 14px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }\n      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 13px; }\n      .label { font-weight: bold; color: #374151; }\n      .value { color: #111827; }\n      .list { margin: 6px 0 0; padding-left: 18px; font-size: 13px; }\n      .footer { margin-top: 20px; font-size: 12px; color: #374151; }\n    </style>\n  </head>\n  <body>\n    <div class=\"page\">\n      <div class=\"header\">\n        <div class=\"title\">ARSO Mark License Certificate</div>\n        <div class=\"subtitle\">Template - Final design to be confirmed</div>\n      </div>\n\n      <div class=\"section\">\n        <h3>License Details</h3>\n        <div class=\"grid\">\n          <div><span class=\"label\">Certificate Reference:</span> <span class=\"value\">${application.applicationNumber || 'Pending'}</span></div>\n          <div><span class=\"label\">Status:</span> <span class=\"value\">${application.status}</span></div>\n          <div><span class=\"label\">Valid From:</span> <span class=\"value\">${validFromLabel}</span></div>\n          <div><span class=\"label\">Valid To:</span> <span class=\"value\">${validToLabel}</span></div>\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h3>Applicant Information</h3>\n        <div class=\"grid\">\n          <div><span class=\"label\">NSB:</span> <span class=\"value\">${application.nsbApplicantName}</span></div>\n          <div><span class=\"label\">Submitted By:</span> <span class=\"value\">${application.declarationSignatory}</span></div>\n          <div><span class=\"label\">Email:</span> <span class=\"value\">${application.signatoryEmail}</span></div>\n          <div><span class=\"label\">Submitted On:</span> <span class=\"value\">${submittedLabel}</span></div>\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h3>Marks, Schemes, Requirements</h3>\n        <div class=\"grid\">\n          <div><span class=\"label\">Marks Applied For:</span> <span class=\"value\">${marks}</span></div>\n          <div><span class=\"label\">Schemes:</span> <span class=\"value\">${schemes}</span></div>\n          <div><span class=\"label\">Requirements:</span> <span class=\"value\">${requirements}</span></div>\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h3>Standard Requirements (Summary)</h3>\n        <ul class=\"list\">\n          <li>ACAP 1-1:2025 - Application completeness and compliance requirements.</li>\n          <li>ACAP 1-3:2025 - Applicant CB registration and documentation readiness.</li>\n          <li>ISO/IEC 17065:2012 - Certification process, impartiality, and control of marks.</li>\n        </ul>\n      </div>\n\n      <div class=\"footer\">\n        <div>This certificate is issued under ARSO Mark Licensing guidelines.</div>\n        <div>Template version - details subject to verification and final agreement execution.</div>\n      </div>\n    </div>\n  </body>\n</html>\n    `.trim();\n    }\n    getValidityEndLabel(validFrom, duration) {\n      if (!validFrom) {\n        return 'N/A';\n      }\n      const start = new Date(validFrom);\n      let yearsToAdd = 1;\n      if (duration === 'TWO_YEARS') {\n        yearsToAdd = 2;\n      } else if (duration === 'THREE_YEARS') {\n        yearsToAdd = 3;\n      } else if (duration === 'PROJECT_BASED') {\n        return 'Project-based';\n      } else if (duration === 'OTHER') {\n        return 'To be defined';\n      }\n      const end = new Date(start);\n      end.setFullYear(end.getFullYear() + yearsToAdd);\n      return end.toLocaleDateString();\n    }\n    static {\n      this.ɵfac = function MarkLicenseDashboardComponent_Factory(t) {\n        return new (t || MarkLicenseDashboardComponent)(i0.ɵɵdirectiveInject(i1.MarkLicenseApplicationService), i0.ɵɵdirectiveInject(i2.NsbService), i0.ɵɵdirectiveInject(i3.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MarkLicenseDashboardComponent,\n        selectors: [[\"app-mark-license-dashboard\"]],\n        decls: 23,\n        vars: 22,\n        consts: [[1, \"p-6\", \"bg-gray-50\", \"min-h-screen\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-6\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-800\"], [1, \"text-gray-500\"], [\"routerLink\", \"/portal/mark-licenses/apply\", 1, \"bg-blue-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded-md\", \"hover:bg-blue-700\", \"transition\", \"flex\", \"items-center\", \"gap-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 20 20\", \"fill\", \"currentColor\", 1, \"h-5\", \"w-5\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\", \"clip-rule\", \"evenodd\"], [1, \"border-b\", \"border-gray-200\", \"mb-6\"], [\"aria-label\", \"Tabs\", 1, \"-mb-px\", \"flex\", \"space-x-8\"], [1, \"whitespace-nowrap\", \"py-4\", \"px-1\", \"border-b-2\", \"font-medium\", \"text-sm\", \"transition-colors\", \"hover:text-gray-700\", \"hover:border-gray-300\", 3, \"click\"], [\"class\", \"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors hover:text-gray-700 hover:border-gray-300\", 3, \"border-blue-500\", \"text-blue-600\", \"border-transparent\", \"text-gray-500\", \"click\", 4, \"ngIf\"], [3, \"ngSwitch\"], [\"class\", \"bg-white rounded-lg shadow overflow-hidden\", 4, \"ngSwitchCase\"], [\"class\", \"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\", 4, \"ngIf\"], [1, \"bg-white\", \"rounded-lg\", \"shadow\", \"overflow-hidden\"], [\"class\", \"p-4 text-sm text-gray-500\", 4, \"ngIf\"], [\"class\", \"p-4 text-sm text-red-600\", 4, \"ngIf\"], [\"class\", \"min-w-full divide-y divide-gray-200\", 4, \"ngIf\"], [\"class\", \"p-4 text-center text-gray-500 text-sm\", 4, \"ngIf\"], [1, \"p-4\", \"text-sm\", \"text-gray-500\"], [1, \"p-4\", \"text-sm\", \"text-red-600\"], [1, \"min-w-full\", \"divide-y\", \"divide-gray-200\"], [1, \"bg-gray-50\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\", \"text-left\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"uppercase\", \"tracking-wider\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\", \"text-right\", \"text-xs\", \"font-medium\", \"text-gray-500\", \"uppercase\", \"tracking-wider\"], [1, \"bg-white\", \"divide-y\", \"divide-gray-200\"], [4, \"ngFor\", \"ngForOf\"], [1, \"px-6\", \"py-4\", \"text-sm\", \"font-medium\"], [\"type\", \"button\", 1, \"text-blue-600\", \"hover:text-blue-900\", \"break-all\", 3, \"click\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-sm\", \"text-gray-500\"], [1, \"px-6\", \"py-4\", \"text-sm\", \"text-gray-500\", \"whitespace-normal\", \"break-words\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\"], [1, \"px-2\", \"inline-flex\", \"text-xs\", \"leading-5\", \"font-semibold\", \"rounded-full\", \"bg-slate-100\", \"text-slate-700\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-right\", \"text-sm\", \"font-medium\"], [1, \"flex\", \"items-center\", \"justify-end\", \"gap-2\"], [\"type\", \"button\", 1, \"text-blue-600\", \"hover:text-blue-900\", 3, \"click\"], [4, \"ngIf\"], [\"type\", \"button\", 1, \"px-3\", \"py-1\", \"text-xs\", \"font-semibold\", \"text-emerald-700\", \"bg-emerald-50\", \"border\", \"border-emerald-200\", \"rounded\", \"hover:bg-emerald-100\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"px-3\", \"py-1\", \"text-xs\", \"font-semibold\", \"text-red-700\", \"bg-red-50\", \"border\", \"border-red-200\", \"rounded\", \"hover:bg-red-100\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", 3, \"disabled\", \"click\"], [1, \"p-4\", \"text-center\", \"text-gray-500\", \"text-sm\"], [1, \"p-4\", \"border-b\", \"border-gray-200\", \"flex\", \"justify-between\", \"items-center\", \"bg-green-50\"], [1, \"text-lg\", \"font-medium\", \"text-green-800\"], [1, \"bg-green-200\", \"text-green-800\", \"text-xs\", \"px-2\", \"py-1\", \"rounded-full\"], [1, \"px-6\", \"py-4\", \"whitespace-nowrap\", \"text-sm\", \"font-medium\", \"text-gray-900\"], [\"class\", \"text-blue-600 hover:text-blue-900 flex items-center justify-end w-full gap-1\", 3, \"href\", 4, \"ngIf\"], [\"class\", \"text-gray-400\", 4, \"ngIf\"], [1, \"text-blue-600\", \"hover:text-blue-900\", \"flex\", \"items-center\", \"justify-end\", \"w-full\", \"gap-1\", 3, \"href\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-4\", \"w-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"], [1, \"text-gray-400\"], [1, \"fixed\", \"inset-0\", \"z-50\", \"flex\", \"items-center\", \"justify-center\", \"bg-black/40\", \"p-4\"], [1, \"bg-white\", \"w-full\", \"max-w-4xl\", \"rounded-xl\", \"shadow-xl\", \"overflow-hidden\"], [1, \"px-6\", \"py-4\", \"border-b\", \"border-gray-100\", \"flex\", \"items-center\", \"justify-between\"], [1, \"text-lg\", \"font-semibold\", \"text-gray-900\"], [1, \"text-xs\", \"text-gray-500\"], [\"type\", \"button\", 1, \"text-gray-400\", \"hover:text-gray-600\", 3, \"click\"], [\"class\", \"p-6\", 4, \"ngIf\"], [\"class\", \"p-6 space-y-6\", 4, \"ngIf\"], [\"class\", \"px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3\", 4, \"ngIf\"], [1, \"p-6\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"p-6\", \"space-y-6\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-4\", \"text-sm\"], [1, \"font-semibold\", \"text-gray-900\"], [1, \"space-y-2\"], [1, \"text-sm\", \"font-semibold\", \"text-gray-800\"], [1, \"text-sm\", \"text-gray-600\"], [1, \"text-sm\", \"text-gray-600\", \"list-disc\", \"list-inside\"], [1, \"px-6\", \"py-4\", \"border-t\", \"border-gray-100\", \"flex\", \"items-center\", \"justify-end\", \"gap-3\"], [\"type\", \"button\", 1, \"px-4\", \"py-2\", \"text-sm\", \"font-semibold\", \"text-gray-600\", \"hover:text-gray-900\", 3, \"click\"], [\"type\", \"button\", 1, \"px-4\", \"py-2\", \"text-sm\", \"font-semibold\", \"text-blue-600\", \"border\", \"border-blue-200\", \"rounded\", \"hover:bg-blue-50\", 3, \"click\"]],\n        template: function MarkLicenseDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n            i0.ɵɵtext(4, \"Mark License Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"p\", 3);\n            i0.ɵɵtext(6, \"Manage your licenses and applications\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"button\", 4);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(8, \"svg\", 5);\n            i0.ɵɵelement(9, \"path\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(10, \" New Application \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(11, \"div\", 7)(12, \"nav\", 8)(13, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_Template_button_click_13_listener() {\n              return ctx.activeTab = \"applications\";\n            });\n            i0.ɵɵtext(14, \" My Applications \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(15, MarkLicenseDashboardComponent_button_15_Template, 2, 8, \"button\", 10);\n            i0.ɵɵelementStart(16, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function MarkLicenseDashboardComponent_Template_button_click_16_listener() {\n              return ctx.activeTab = \"approved\";\n            });\n            i0.ɵɵtext(17, \" Approved License Registrations \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(18, \"div\", 11);\n            i0.ɵɵtemplate(19, MarkLicenseDashboardComponent_div_19_Template, 5, 4, \"div\", 12);\n            i0.ɵɵtemplate(20, MarkLicenseDashboardComponent_div_20_Template, 3, 2, \"div\", 12);\n            i0.ɵɵtemplate(21, MarkLicenseDashboardComponent_div_21_Template, 22, 3, \"div\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(22, MarkLicenseDashboardComponent_div_22_Template, 13, 3, \"div\", 13);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(13);\n            i0.ɵɵclassProp(\"border-blue-500\", ctx.activeTab === \"applications\")(\"text-blue-600\", ctx.activeTab === \"applications\")(\"border-transparent\", ctx.activeTab !== \"applications\")(\"text-gray-500\", ctx.activeTab !== \"applications\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdminUser);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"border-blue-500\", ctx.activeTab === \"approved\")(\"text-blue-600\", ctx.activeTab === \"approved\")(\"border-transparent\", ctx.activeTab !== \"approved\")(\"text-gray-500\", ctx.activeTab !== \"approved\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngSwitch\", ctx.activeTab);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngSwitchCase\", \"applications\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngSwitchCase\", \"approvals\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngSwitchCase\", \"approved\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.viewLoading || ctx.selectedApplication);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i4.NgSwitch, i4.NgSwitchCase, i5.RouterLink],\n        styles: [\"[_nghost-%COMP%]{display:block;width:100%}.dashboard-widget[_ngcontent-%COMP%]{transition:all .2s ease}.dashboard-widget[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a}.tab-nav[_ngcontent-%COMP%]{border-bottom:2px solid #e2e8f0}.tab-button[_ngcontent-%COMP%]{transition:all .2s ease}.tab-button.active[_ngcontent-%COMP%]{border-bottom-color:#2563eb;color:#2563eb}.tab-button[_ngcontent-%COMP%]:hover{color:#1e293b}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#ffffff,#f8fafc);transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.progress-bar[_ngcontent-%COMP%]{transition:width .3s ease}.deadline-item[_ngcontent-%COMP%]{transition:all .2s ease}.deadline-item[_ngcontent-%COMP%]:hover{transform:translate(4px)}@media (max-width: 768px){.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}\"]\n      });\n    }\n  }\n  return MarkLicenseDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}