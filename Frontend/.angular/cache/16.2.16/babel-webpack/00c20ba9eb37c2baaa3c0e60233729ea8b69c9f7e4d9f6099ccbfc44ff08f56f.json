{"ast":null,"code":"import { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let TraceabilityPublicService = /*#__PURE__*/(() => {\n  class TraceabilityPublicService {\n    constructor(http) {\n      this.http = http;\n      this.baseUrl = `${environment.apiBase}/public/traceability`;\n    }\n    getProducts(params, geo) {\n      let httpParams = new HttpParams();\n      if (params) {\n        Object.entries(params).forEach(([key, value]) => {\n          if (value !== undefined && value !== null && value !== '') {\n            httpParams = httpParams.set(key, String(value));\n          }\n        });\n      }\n      const headers = this.buildGeoHeaders(geo);\n      return this.http.get(`${this.baseUrl}/products`, {\n        params: httpParams,\n        headers\n      });\n    }\n    getProductDetail(id) {\n      return this.http.get(`${this.baseUrl}/products/${id}`);\n    }\n    verifyToken(token, geo) {\n      const params = new HttpParams().set('token', token);\n      const headers = this.buildGeoHeaders(geo);\n      return this.http.get(`${this.baseUrl}/verify`, {\n        params,\n        headers\n      });\n    }\n    buildGeoHeaders(geo) {\n      let headers = new HttpHeaders();\n      if (!geo) return headers;\n      if (geo.country) headers = headers.set('x-geo-country', geo.country);\n      if (geo.city) headers = headers.set('x-geo-city', geo.city);\n      if (geo.lat !== undefined) headers = headers.set('x-geo-lat', String(geo.lat));\n      if (geo.lon !== undefined) headers = headers.set('x-geo-lon', String(geo.lon));\n      return headers;\n    }\n    static {\n      this.ɵfac = function TraceabilityPublicService_Factory(t) {\n        return new (t || TraceabilityPublicService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: TraceabilityPublicService,\n        factory: TraceabilityPublicService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return TraceabilityPublicService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}